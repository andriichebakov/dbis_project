(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{233:function(e,n,t){},413:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(28),s=t.n(c),i=t(54),u=t(85),o=(t(233),t(20)),l=t(48),d=t(220),p=function(){return Object(u.b)()},j=u.c,h=function(e){var n=Object(r.useState)(e),t=Object(l.a)(n,2),a=t[0],c=t[1],s=function(e,n){var t=new FileReader;t.addEventListener("load",(function(){return n(t.result)})),t.readAsDataURL(e)};return{img:a,setImg:c,handleChange:function(e){"done"===e.file.status&&s(e.file.originFileObj,(function(e){c(e)}))},beforeUpload:function(e){var n="image/jpeg"===e.type||"image/png"===e.type;n||d.b.error("\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0442\u0435 JPG \u0430\u0431\u043e PNG \u0444\u0430\u0439\u043b!");var t=e.size/1024/1024<2;return t||d.b.error("\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0454 \u0432\u0430\u0436\u0438\u0442\u0438 \u043d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 2MB!"),n&&t},dummyRequest:function(e){var n=e.onSuccess;setTimeout((function(){n&&n("ok")}),0)}}},f=function(e,n){var t=p();Object(r.useEffect)((function(){e&&(d.b.error(e),n&&t(n(null)))}),[e,t,n])},b=function(e,n,t){var a=p();Object(r.useEffect)((function(){n&&(d.b.success(e),t&&a(t(null)))}),[n,a,t,e])},g=t(72),x=t(420),O=t(5),m=function(e){var n=e.children;return Object(O.jsx)("div",{className:"w-18 flex justify-center items-center p-2",children:n})},v=function(e){var n=e.channel;return Object(O.jsx)(i.c,{to:"channel/".concat(n.id),className:function(e){return e.isActive?"bg-blue-100 rounded-lg":""},children:Object(O.jsx)(m,{children:Object(O.jsx)(g.a,{title:n.name,placement:"right",children:Object(O.jsx)(x.a,{size:48,src:n.photo,children:n.name[0].toUpperCase()})})})})},C=t(70),y=t(222),w=t(106),E=t(30),S=t(27),I=t.n(S),k=t(42),F=t(211),N=t.n(F).a.create({baseURL:"https://kpi-network.herokuapp.com/",withCredentials:!0}),U=function(e){return N.get("channel/".concat(e))},q=function(e){return N.post("channel",Object(E.a)({},e))},P=function(e){return N.put("channel/".concat(e.id),Object(E.a)({},e))},T=function(e){var n=e.id,t=e.page,r=e.count;return N.get("channel/".concat(n,"/posts?page=").concat(t,"&count=").concat(r))},R=t(31),z=function(e){return N.get("user/".concat(e))},V=function(e){return N.put("user",Object(E.a)({},e))},A=function(e,n){return N.get("/user/channels?page=".concat(e,"&count=").concat(n))},L=Object(R.b)("user/fetched",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rejectWithValue,e.prev=1,e.next=4,z(n);case 4:if(!(a=e.sent).data.errors[0]){e.next=7;break}return e.abrupt("return",r(a.data.errors[0]));case 7:return e.abrupt("return",a.data);case 10:if(e.prev=10,e.t0=e.catch(1),!(i=e.t0).response||401!==i.response.status){e.next=15;break}return e.abrupt("return",r(i.response.data.errors[0]));case 15:return e.abrupt("return",r(null!==(c=null===(s=i.response)||void 0===s?void 0:s.statusText)&&void 0!==c?c:"Some error occured"));case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n,t){return e.apply(this,arguments)}}()),W=Object(R.b)("user/updated",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rejectWithValue,a=t.getState,c=a(),e.prev=2,e.next=5,V(n);case 5:if(!(s=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",r(s.data.errors[0]));case 8:return e.abrupt("return",Object(E.a)(Object(E.a)({},c.user.user),n));case 11:if(e.prev=11,e.t0=e.catch(2),!(o=e.t0).response||401!==o.response.status){e.next=16;break}return e.abrupt("return",r(o.response.data.errors[0]));case 16:return e.abrupt("return",r(null!==(i=null===(u=o.response)||void 0===u?void 0:u.statusText)&&void 0!==i?i:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n,t){return e.apply(this,arguments)}}()),M=Object(R.b)("user/channels_fetched",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.portion,a=n.count,c=t.rejectWithValue,e.prev=2,e.next=5,A(r,a);case 5:if(!(s=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",c(s.data.errors[0]));case 8:return e.abrupt("return",s.data);case 11:if(e.prev=11,e.t0=e.catch(2),!(o=e.t0).response||401!==o.response.status){e.next=16;break}return e.abrupt("return",c(o.response.data.errors[0]));case 16:return e.abrupt("return",c(null!==(i=null===(u=o.response)||void 0===u?void 0:u.statusText)&&void 0!==i?i:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n,t){return e.apply(this,arguments)}}()),_=Object(R.c)({name:"user",initialState:{user:null,isFetching:!1,fetchingError:null,isUpdating:!1,updateSucceed:!1,updatingError:null,channels:[],count:10,lastPortion:0,total:null,isChannelsFetching:!1,channelsFetchingError:null},reducers:{addChannel:function(e,n){e.channels.push(n.payload)},userChanged:function(e,n){e.user=n.payload},userChannelsChanged:function(e,n){e.channels=n.payload},channelsFetchingErrorChanged:function(e,n){e.channelsFetchingError=n.payload},updateSucceedChanged:function(e,n){e.updateSucceed=n.payload},updatingErrorChanged:function(e,n){e.updatingError=n.payload}},extraReducers:function(e){e.addCase(L.pending,(function(e){e.isFetching=!0})).addCase(L.fulfilled,(function(e,n){e.isFetching=!1,e.user=n.payload.data})).addCase(L.rejected,(function(e,n){var t;e.fetchingError=null!==(t=n.payload)&&void 0!==t?t:null,e.isFetching=!1})).addCase(W.pending,(function(e){e.isUpdating=!0})).addCase(W.fulfilled,(function(e,n){e.isUpdating=!1,e.updateSucceed=!0,e.user=n.payload})).addCase(W.rejected,(function(e,n){var t;e.updatingError=null!==(t=n.payload)&&void 0!==t?t:null,e.isUpdating=!1})).addCase(M.pending,(function(e){e.isChannelsFetching=!0})).addCase(M.fulfilled,(function(e,n){e.isChannelsFetching=!1,e.channels=[].concat(Object(w.a)(e.channels),Object(w.a)(n.payload.data.items)),e.lastPortion+=1,e.total=n.payload.data.total})).addCase(M.rejected,(function(e,n){var t;e.channelsFetchingError=null!==(t=n.payload)&&void 0!==t?t:null,e.isChannelsFetching=!1}))}}),D=_.actions,B=D.addChannel,G=D.userChanged,J=D.userChannelsChanged,H=D.updateSucceedChanged,Y=D.updatingErrorChanged,K=D.channelsFetchingErrorChanged,Q=_.reducer,X=Object(R.b)("channel/fetched",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u,o,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rejectWithValue,a=t.dispatch,c=t.getState,s=c(),e.prev=2,e.next=5,U(n);case 5:if(!(i=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",r(i.data.errors[0]));case 8:return a(ee({id:n,page:s.channel.lastPortion+1,count:s.channel.count})),e.abrupt("return",i.data);case 12:if(e.prev=12,e.t0=e.catch(2),!(l=e.t0).response||404!==l.response.status){e.next=17;break}return e.abrupt("return",r(l.response.data.errors[0]));case 17:return e.abrupt("return",r(null!==(u=null===(o=l.response)||void 0===o?void 0:o.statusText)&&void 0!==u?u:"Some error occured"));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n,t){return e.apply(this,arguments)}}()),Z=Object(R.b)("channel/created",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,a=t.rejectWithValue,e.prev=1,e.next=4,q(n);case 4:if(!(c=e.sent).data.errors[0]){e.next=7;break}return e.abrupt("return",a(c.data.errors[0]));case 7:return c.data.data.id&&(r(B(Object(E.a)({id:c.data.data.id},n))),r(ae())),e.abrupt("return",c.data);case 11:if(e.prev=11,e.t0=e.catch(1),!(u=e.t0).response||401!==u.response.status){e.next=16;break}return e.abrupt("return",a(u.response.data.errors[0]));case 16:return e.abrupt("return",a(null!==(s=null===(i=u.response)||void 0===i?void 0:i.statusText)&&void 0!==s?s:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n,t){return e.apply(this,arguments)}}()),$=Object(R.b)("channel/edited",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,a=t.rejectWithValue,e.prev=1,e.next=4,P(n);case 4:if(!(c=e.sent).data.errors[0]){e.next=7;break}return e.abrupt("return",a(c.data.errors[0]));case 7:return r(se()),e.abrupt("return",n);case 11:if(e.prev=11,e.t0=e.catch(1),!(u=e.t0).response||401!==u.response.status){e.next=16;break}return e.abrupt("return",a(u.response.data.errors[0]));case 16:return e.abrupt("return",a(null!==(s=null===(i=u.response)||void 0===i?void 0:i.statusText)&&void 0!==s?s:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n,t){return e.apply(this,arguments)}}()),ee=Object(R.b)("channel/postsFetched",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u,o,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,a=n.page,c=n.count,s=t.rejectWithValue,e.prev=2,e.next=5,T({id:r,page:a,count:c});case 5:if(!(i=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",s(i.data.errors[0]));case 8:return e.abrupt("return",i.data);case 11:return e.prev=11,e.t0=e.catch(2),l=e.t0,e.abrupt("return",s(null!==(u=null===(o=l.response)||void 0===o?void 0:o.statusText)&&void 0!==u?u:"Some error occured"));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n,t){return e.apply(this,arguments)}}()),ne=Object(R.c)({name:"channel",initialState:{channel:null,posts:null,totalPosts:null,count:10,lastPortion:0,isPostFetching:!1,postFetchingError:null,isCreatorOpened:!1,isCreating:!1,creationError:null,createdSucceed:!1,isEditorOpened:!1,isEditing:!1,editingError:null,editedSucceed:!1,isFetching:!1,fetchingError:null},reducers:{creatorOpened:function(e){e.isCreatorOpened=!0},creatorClosed:function(e){e.isCreatorOpened=!1},editorOpened:function(e){e.isEditorOpened=!0},editorClosed:function(e){e.isEditorOpened=!1},creationErrorChanged:function(e,n){e.creationError=n.payload},createdSucceedChanged:function(e,n){e.createdSucceed=n.payload},editedSucceedChanged:function(e,n){e.editedSucceed=n.payload},postsChanged:function(e,n){e.posts=n.payload},postAdded:function(e,n){e.posts?e.posts.push(n.payload):e.posts=[n.payload]}},extraReducers:function(e){e.addCase(X.pending,(function(e){e.isFetching=!0})).addCase(X.fulfilled,(function(e,n){e.isFetching=!1,e.channel=n.payload.data,e.fetchingError=null})).addCase(X.rejected,(function(e,n){var t;e.channel=null,e.isFetching=!1,e.fetchingError=null!==(t=n.payload)&&void 0!==t?t:null})).addCase(Z.pending,(function(e){e.isCreating=!0})).addCase(Z.fulfilled,(function(e){e.isCreating=!1,e.createdSucceed=!0})).addCase(Z.rejected,(function(e,n){var t;e.isCreating=!1,e.creationError=null!==(t=n.payload)&&void 0!==t?t:null})).addCase($.pending,(function(e){e.isEditing=!0})).addCase($.fulfilled,(function(e,n){e.isEditing=!1,e.channel=n.payload})).addCase($.rejected,(function(e,n){var t;e.isEditing=!1,e.editingError=null!==(t=n.payload)&&void 0!==t?t:null})).addCase(ee.pending,(function(e){e.isPostFetching=!0})).addCase(ee.fulfilled,(function(e,n){e.isPostFetching=!1,e.posts?e.posts=[].concat(Object(w.a)(e.posts),Object(w.a)(n.payload.data.items)):e.posts=n.payload.data.items,e.lastPortion+=1,e.totalPosts=n.payload.data.total})).addCase(ee.rejected,(function(e,n){var t;e.isPostFetching=!1,e.editingError=null!==(t=n.payload)&&void 0!==t?t:null}))}}),te=ne.actions,re=te.creatorOpened,ae=te.creatorClosed,ce=te.editorOpened,se=te.editorClosed,ie=te.creationErrorChanged,ue=te.createdSucceedChanged,oe=te.editedSucceedChanged,le=te.postsChanged,de=te.postAdded,pe=ne.reducer,je=function(){var e=p();return Object(O.jsx)(m,{children:Object(O.jsx)(C.a,{icon:Object(O.jsx)(y.a,{className:"text-2xl"}),shape:"circle",className:"w-12 h-12",onClick:function(){e(re())}})})},he=function(){var e,n,t=p(),a=j((function(e){return e.user.channels})),c=j((function(e){return e.user.total})),s=j((function(e){return e.user.count})),i=j((function(e){return e.user.isChannelsFetching})),u=j((function(e){return e.user.channelsFetchingError}));f(u,K),e="\u0417\u0430\u0432\u0430\u043d\u0442\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u043d\u0430\u043b\u0456\u0432...",n=i,Object(r.useEffect)((function(){var t=function(){};n?t=d.b.loading(e):t()}),[n,e]);var o=j((function(e){return e.user.lastPortion}));return Object(O.jsxs)("aside",{className:"flex flex-col items-center bg-gray-100 overflow-y-scroll",onScroll:function(e){if(!i&&(null===c||o*s<c)){var n=e.currentTarget.scrollHeight,r=e.currentTarget.clientHeight;n-e.currentTarget.scrollTop-r<30&&t(M({portion:o+1,count:s}))}},children:[Object(O.jsx)(je,{}),a.map((function(e){return Object(O.jsx)(v,{channel:e},e.id)})).reverse()]})},fe=t(14),be=t(107),ge=t(416),xe=[],Oe=function(){var e=Object(o.h)(),n=Object(o.i)().userId;return Object(O.jsx)("aside",{className:"flex-none w-56 border-l-2 p-2",children:Object(O.jsx)(fe.b,{renderEmpty:function(){return Object(O.jsx)(be.a,{image:be.a.PRESENTED_IMAGE_SIMPLE,description:"\u0412\u0438 \u043f\u043e\u043a\u0438 \u0449\u043e \u043d\u0435 \u043c\u0430\u0454\u0442\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432"})},children:Object(O.jsx)(ge.b,{className:"w-full h-full ".concat(!xe.length&&"flex items-center"),itemLayout:"horizontal",dataSource:xe,renderItem:function(t){return Object(O.jsx)(ge.b.Item,{className:n&&+n===t.id?"bg-blue-100 rounded-md cursor-pointer":"cursor-pointer",onClick:function(){return e("chat/".concat(t.id))},children:Object(O.jsx)(ge.b.Item.Meta,{avatar:Object(O.jsx)(x.a,{src:"https://joeschmoe.io/api/v1/random"}),title:t.title,description:Object(O.jsx)("p",{className:"truncate",children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Dolorem doloribus non vel voluptatem aspernatur soluta esse impedit, doloremque sequi quae nihil, quod excepturi magni aut fuga aperiam quaerat temporibus debitis?"})})})}})})})},me=t(417),ve=t(419),Ce=t(414),ye=t(421),we=t(424),Ee=function(){var e=j((function(e){return e.channel.isCreatorOpened})),n=j((function(e){return e.channel.isCreating})),t=j((function(e){return e.channel.createdSucceed})),a=j((function(e){return e.channel.creationError})),c=h(null),s=c.img,i=c.setImg,u=c.dummyRequest,o=c.beforeUpload,d=c.handleChange,g=me.a.useForm(),m=Object(l.a)(g,1)[0],v=p();f(a,ie),b("\u041a\u0430\u043d\u0430\u043b \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e",t,ue),Object(r.useEffect)((function(){e&&(m.resetFields(),i(null))}),[m,e,i]);return Object(O.jsx)(ve.a,{title:"\u0421\u0442\u0432\u043e\u0440\u0456\u0442\u044c \u0441\u0432\u0456\u0439 \u043a\u0430\u043d\u0430\u043b",centered:!0,visible:e,onOk:function(){m.submit()},onCancel:function(){v(ae())},okButtonProps:{loading:n},cancelButtonProps:{disabled:n},width:800,children:Object(O.jsxs)("div",{className:"flex gap-5",children:[Object(O.jsx)(Ce.a,{name:"channel",showUploadList:!1,beforeUpload:o,customRequest:u,onChange:d,children:Object(O.jsx)(x.a,{size:200,shape:"square",src:s,icon:Object(O.jsx)(we.a,{})})}),Object(O.jsxs)(me.a,{form:m,name:"createChannel",onFinish:function(e){console.log(e),v(Z(Object(E.a)(Object(E.a)({},e),{},{photo:s})))},className:"flex-grow",children:[Object(O.jsx)(me.a.Item,{name:"name",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043a\u0430\u043d\u0430\u043b\u0443",whitespace:!0}],children:Object(O.jsx)(ye.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043a\u0430\u043d\u0430\u043b\u0443"})}),Object(O.jsx)(me.a.Item,{name:"description",initialValue:null,children:Object(O.jsx)(ye.a,{placeholder:"\u041e\u043f\u0438\u0441 \u043a\u0430\u043d\u0430\u043b\u0443 (\u043d\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u043e)"})})]})]})})},Se=function(){var e=j((function(e){return e.channel.channel})),n=j((function(e){return e.channel.isEditorOpened})),t=j((function(e){return e.channel.isEditing})),a=j((function(e){return e.channel.editingError})),c=j((function(e){return e.channel.editedSucceed})),s=h(e?e.photo:null),i=s.img,u=s.setImg,o=s.dummyRequest,d=s.beforeUpload,g=s.handleChange,m=me.a.useForm(),v=Object(l.a)(m,1)[0],C=p();f(a,oe),b("\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044e \u0437\u043c\u0456\u043d\u0435\u043d\u043e",c,oe),Object(r.useEffect)((function(){n&&(v.resetFields(),u(e?e.photo:null))}),[n,v,u,e]);return Object(O.jsx)(ve.a,{title:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u043a\u0430\u043d\u0430\u043b\u0443",centered:!0,visible:n,onOk:function(){v.submit()},onCancel:function(){C(se())},okButtonProps:{loading:t},cancelButtonProps:{disabled:t},width:800,children:Object(O.jsxs)("div",{className:"flex gap-5",children:[Object(O.jsx)(Ce.a,{name:"channel",showUploadList:!1,beforeUpload:d,customRequest:o,onChange:g,children:Object(O.jsx)(x.a,{size:200,shape:"square",src:i,icon:Object(O.jsx)(we.a,{})})}),Object(O.jsxs)(me.a,{form:v,name:"editChannel",onFinish:function(n){console.log(n),e&&C($(Object(E.a)(Object(E.a)(Object(E.a)({},e),n),{},{photo:i})))},className:"flex-grow",children:[Object(O.jsx)(me.a.Item,{name:"name",initialValue:e?e.name:"",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043a\u0430\u043d\u0430\u043b\u0443",whitespace:!0}],children:Object(O.jsx)(ye.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043a\u0430\u043d\u0430\u043b\u0443"})}),Object(O.jsx)(me.a.Item,{name:"description",initialValue:e?e.description:"",children:Object(O.jsx)(ye.a,{placeholder:"\u041e\u043f\u0438\u0441 \u043a\u0430\u043d\u0430\u043b\u0443 (\u043d\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u043e)"})})]})]})})},Ie=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(he,{}),Object(O.jsxs)("main",{className:"flex justify-center items-center flex-grow bg-white p-6",children:[Object(O.jsx)(Ee,{}),Object(O.jsx)(Se,{}),Object(O.jsx)(o.b,{})]}),Object(O.jsx)(Oe,{})]})},ke=t(415),Fe=t(418),Ne=t(214),Ue=t(422),qe=t(425),Pe=function(){var e=j((function(e){return e.channel.posts}));return Object(O.jsx)(fe.b,{renderEmpty:function(){return Object(O.jsx)(be.a,{image:be.a.PRESENTED_IMAGE_SIMPLE,description:Object(O.jsxs)("span",{children:["\u041a\u0430\u043d\u0430\u043b \u043d\u0430\u0440\u0430\u0437\u0456 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439.",Object(O.jsx)("br",{})," \u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0438\u043c!"]})})},children:Object(O.jsx)(ge.b,{className:"flex-grow overflow-y-scroll ".concat(!(null===e||void 0===e?void 0:e.length)&&"flex justify-center items-center"),dataSource:null!==e&&void 0!==e?e:void 0,renderItem:function(e){return Object(O.jsx)(ge.b.Item,{className:"bg-white rounded-sm mb-2",children:Object(O.jsx)(ge.b.Item.Meta,{avatar:Object(O.jsx)(x.a,{size:"large",icon:Object(O.jsx)(qe.a,{}),src:e.author.photo}),title:e.author.name,description:e.text})},e.id)}})})},Te=function(e){return N.post("posts",Object(E.a)({},e))},Re=Object(R.b)("post/sended",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u,o,l,d,p,j,h,f,b;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getState,c=t.dispatch,s=t.rejectWithValue,i=a(),u=null===(r=i.channel.channel)||void 0===r?void 0:r.id,o=i.user.user,e.prev=4,!u){e.next=12;break}return l={text:n,channelId:u},e.next=9,Te(l);case 9:return d=e.sent,c(de(Object(E.a)(Object(E.a)({id:d.data.data.id},l),{},{author:o}))),e.abrupt("return",d.data);case 12:return e.abrupt("return",s("There is no channel id provided"));case 15:if(e.prev=15,e.t0=e.catch(4),j=e.t0,h=[401,404],!(null===(p=j.response)||void 0===p?void 0:p.status)||!h.includes(j.response.status)){e.next=23;break}return e.abrupt("return",s(j.response.data.errors[0]));case 23:return e.abrupt("return",s(null!==(f=null===(b=j.response)||void 0===b?void 0:b.statusText)&&void 0!==f?f:"Some error occured"));case 24:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(n,t){return e.apply(this,arguments)}}()),ze=Object(R.c)({name:"post",initialState:{post:null,total:null,isSending:!1,sendingError:null,isFetching:!1,fetchingError:null},reducers:{},extraReducers:function(e){return e.addCase(Re.pending,(function(e){e.isSending=!0,e.sendingError=null})).addCase(Re.fulfilled,(function(e){e.isSending=!1})).addCase(Re.rejected,(function(e,n){var t;e.isSending=!1,e.sendingError=null!==(t=n.error.message)&&void 0!==t?t:null}))}}).reducer,Ve=ye.a.TextArea,Ae=function(){var e=p(),n=me.a.useForm(),t=Object(l.a)(n,1)[0];return Object(O.jsx)("div",{className:"w-full",children:Object(O.jsx)(me.a,{name:"post",form:t,onFinish:function(n){t.resetFields(),n.text.trim()&&e(Re(n.text))},children:Object(O.jsx)(me.a.Item,{name:"text",noStyle:!0,children:Object(O.jsx)(Ve,{autoFocus:!0,placeholder:"Enter your message here...",autoSize:{maxRows:6,minRows:1},onPressEnter:function(e){e.shiftKey||(e.preventDefault(),t.submit())}})})})})},Le=function(){var e=j((function(e){return e.channel.channel})),n=j((function(e){return e.channel.isFetching})),t=j((function(e){return e.channel.fetchingError})),a=p(),c=Object(o.i)();Object(r.useEffect)((function(){!c.channelId||null!==e&&+c.channelId===e.id||(a(le(null)),a(X(+c.channelId)))}),[c.channelId,e,a]);return!e||t||n?Object(O.jsxs)(ke.a,{className:"w-full h-full flex flex-col",bodyStyle:{display:"flex",flexDirection:"column",justifyContent:"center",overflowY:"hidden",height:"100%"},children:[n&&!t&&Object(O.jsx)(Ne.a,{}),t&&Object(O.jsx)(Ue.a,{status:"warning",title:"\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434 \u0447\u0430\u0441 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u043d\u0430\u043b\u0443",subTitle:t,extra:Object(O.jsx)(C.a,{type:"primary",onClick:function(){c.channelId&&a(X(+c.channelId))},loading:n,children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0432\u0430\u0442\u0438 \u0449\u0435 \u0440\u0430\u0437"})})]}):Object(O.jsxs)(ke.a,{title:e.name,extra:Object(O.jsx)(Fe.a.Link,{onClick:function(){a(ce())},children:"Edit"}),className:"w-full h-full flex flex-col",bodyStyle:{display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%"},children:[Object(O.jsx)(Pe,{}),Object(O.jsx)(Ae,{})]})},We=Fe.a.Paragraph,Me=function(){var e=p();return Object(O.jsx)(be.a,{className:"",description:Object(O.jsxs)("div",{children:[Object(O.jsx)(We,{strong:!0,children:"\u041f\u043e\u0447\u043d\u0456\u0442\u044c \u0441\u0432\u043e\u044e \u0440\u043e\u0431\u043e\u0442\u0443 \u0437\u0456 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u044f \u043a\u0430\u043d\u0430\u043b\u0443"}),Object(O.jsx)(C.a,{type:"primary",onClick:function(){e(re())},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043a\u0430\u043d\u0430\u043b"})]})})},_e=t.p+"static/media/logo.da23b606.png",De=function(){return Object(O.jsx)("div",{className:"flex justify-center items-center flex-none w-18 p-1",children:Object(O.jsx)(i.b,{to:"/",children:Object(O.jsx)("img",{src:_e,alt:"kpi logo",className:"w-14"})})})},Be=function(){return Object(O.jsx)("div",{className:"flex-grow p-1"})},Ge=t(216),Je=t.n(Ge),He=function(){var e=j((function(e){return e.user.user}));return Object(O.jsx)("div",{className:"flex items-center gap-2 flex-none w-56 py-1 pl-1 pr-4",children:e&&Object(O.jsx)(i.b,{to:"/settings",children:Object(O.jsxs)("div",{className:"flex flex-grow items-center gap-2 overflow-hidden group",children:[Object(O.jsx)(x.a,{size:48,icon:Object(O.jsx)(qe.a,{}),src:e.photo,className:"flex-none"}),Object(O.jsx)(Je.a,{strong:!0,className:"text-base truncate group-hover:text-blue-400",children:e.login})]})})})},Ye=function(){return Object(O.jsxs)("header",{className:"flex items-center border-b-2 bg-gray-100",children:[Object(O.jsx)(De,{}),Object(O.jsx)(Be,{}),Object(O.jsx)(He,{})]})},Ke=function(){return Object(O.jsx)("div",{className:"h-screen flex justify-center items-center",children:Object(O.jsx)(Ne.a,{size:"large",tip:Object(O.jsx)("span",{className:"text-lg",children:"Loading app . . ."})})})},Qe=function(){return N.get("session")},Xe=function(e){var n=e.login,t=e.password;return N.post("session",{login:n,password:t})},Ze=function(e){return N.post("user",Object(E.a)({},e))},$e=function(){return N.delete("session")},en=Object(R.b)("auth/authorized",Object(k.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe();case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))),nn=Object(R.b)("auth/signed_in",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.login,a=n.password,c=t.rejectWithValue,e.prev=2,e.next=5,Xe({login:r,password:a});case 5:if(!(s=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",c(s.data.errors[0]));case 8:return e.abrupt("return",s.data);case 11:if(e.prev=11,e.t0=e.catch(2),!(o=e.t0).response||401!==o.response.status){e.next=16;break}return e.abrupt("return",c(o.response.data.errors[0]));case 16:return e.abrupt("return",c(null!==(i=null===(u=o.response)||void 0===u?void 0:u.statusText)&&void 0!==i?i:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n,t){return e.apply(this,arguments)}}()),tn=Object(R.b)("auth/signed_up",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c,s,i,u,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rejectWithValue,e.prev=1,e.next=4,Ze(n);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),s=e.t0,i=[400,404,409],!(null===(c=s.response)||void 0===c?void 0:c.status)||!i.includes(s.response.status)){e.next=16;break}return e.abrupt("return",r(s.response.data.errors[0]));case 16:return e.abrupt("return",r(null!==(u=null===(o=s.response)||void 0===o?void 0:o.statusText)&&void 0!==u?u:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n,t){return e.apply(this,arguments)}}()),rn=Object(R.b)("auth/signed_out",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,e.next=3,$e();case 3:return(a=e.sent).data.errors.length||(r(G(null)),r(J([]))),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),an=Object(R.c)({name:"auth",initialState:{id:null,isAuthorizing:!0,authError:null,isSigningIn:!1,signingInError:null,isSigningUp:!1,signingUpError:null,isSigningOut:!1,signingOutError:null},reducers:{signingInErrorChanged:function(e,n){e.signingInError=n.payload},signingUpErrorChanged:function(e,n){e.signingUpError=n.payload},signingOutErrorChanged:function(e,n){e.signingOutError=n.payload}},extraReducers:function(e){e.addCase(en.pending,(function(e){e.isAuthorizing=!0,e.id=null})).addCase(en.fulfilled,(function(e,n){e.isAuthorizing=!1,e.authError=null,!n.payload.errors.length&&n.payload.data.id&&(e.id=n.payload.data.id)})).addCase(en.rejected,(function(e,n){var t;e.authError=null!==(t=n.error.message)&&void 0!==t?t:null,e.isAuthorizing=!1})).addCase(nn.pending,(function(e){e.isSigningIn=!0})).addCase(nn.fulfilled,(function(e,n){e.isSigningIn=!1,n.payload.data.id&&(e.id=n.payload.data.id)})).addCase(nn.rejected,(function(e,n){var t;e.signingInError=null!==(t=n.payload)&&void 0!==t?t:null,e.isSigningIn=!1})).addCase(tn.pending,(function(e){e.isSigningUp=!0})).addCase(tn.fulfilled,(function(e,n){e.isSigningUp=!1,!n.payload.errors.length&&n.payload.data.id&&(e.id=n.payload.data.id)})).addCase(tn.rejected,(function(e,n){var t;e.signingUpError=null!==(t=n.payload)&&void 0!==t?t:null,e.isSigningUp=!1})).addCase(rn.pending,(function(e){e.isSigningOut=!0})).addCase(rn.fulfilled,(function(e){e.isSigningOut=!1,e.id=null})).addCase(rn.rejected,(function(e,n){var t;e.signingOutError=null!==(t=n.error.message)&&void 0!==t?t:null,e.isSigningOut=!1}))}}),cn=an.actions,sn=cn.signingInErrorChanged,un=cn.signingUpErrorChanged,on=cn.signingOutErrorChanged,ln=an.reducer,dn=function(e){var n=e.error,t=e.loading,r=p();return Object(O.jsx)("div",{className:"h-screen w-screen flex justify-center items-center",children:Object(O.jsx)(Ue.a,{status:"warning",title:"\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434 \u0447\u0430\u0441 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u043e\u0434\u0430\u0442\u043a\u0443",subTitle:n,extra:Object(O.jsx)(C.a,{type:"primary",onClick:function(){r(en())},loading:t,children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0432\u0430\u0442\u0438 \u0449\u0435 \u0440\u0430\u0437"})})})},pn=function(){var e=Object(o.h)();return Object(O.jsx)("div",{className:"h-full w-full flex justify-center items-center",children:Object(O.jsx)(Ue.a,{status:"404",title:"404",subTitle:"\u0412\u0438\u0431\u0430\u0447\u0442\u0435, \u0442\u0430\u043a\u043e\u0457 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438 \u043d\u0435 \u0456\u0441\u043d\u0443\u0454",extra:Object(O.jsx)(C.a,{type:"primary",onClick:function(){e("/")},children:"\u041d\u0430 \u0433\u043e\u043b\u043e\u0432\u043d\u0443"})})})},jn=t(423),hn=function(){var e,n=j((function(e){return e.user.user})),t=j((function(e){return e.user.isUpdating})),r=j((function(e){return e.user.updateSucceed})),a=j((function(e){return e.user.updatingError})),c=j((function(e){return e.auth.signingOutError}));f(c,on),f(a,Y),b("\u0417\u043c\u0456\u043d\u0438 \u0437\u0430\u0441\u0442\u043e\u0441\u043e\u0432\u0430\u043d\u0456",r,H);var s=Object(u.b)(),i=h(null!==(e=null===n||void 0===n?void 0:n.photo)&&void 0!==e?e:null),o=i.img,l=i.handleChange,d=i.beforeUpload,p=i.dummyRequest;return Object(O.jsxs)("div",{className:"flex gap-5 ml-auto mr-auto self-center",children:[Object(O.jsx)("div",{children:Object(O.jsx)(Ce.a,{name:"avatar",showUploadList:!1,beforeUpload:d,customRequest:p,onChange:l,children:Object(O.jsx)(x.a,{size:200,shape:"square",src:o,icon:Object(O.jsx)(qe.a,{})})})}),Object(O.jsx)("div",{className:"w-96",children:Object(O.jsxs)(me.a,{name:"settings",onFinish:function(e){s(W(Object(E.a)(Object(E.a)({},e),{},{photo:o})))},children:[Object(O.jsx)(me.a.Item,{name:"name",initialValue:null===n||void 0===n?void 0:n.name,rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0432\u043e\u0454 \u0456\u043c'\u044f",whitespace:!0}],children:Object(O.jsx)(ye.a,{placeholder:"\u041f.\u0406.\u0411."})}),Object(O.jsx)(me.a.Item,{name:"department",initialValue:null===n||void 0===n?void 0:n.department,rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0432\u0430\u0448\u043e\u0457 \u043a\u0430\u0444\u0435\u0434\u0440\u0438",whitespace:!0}],children:Object(O.jsx)(ye.a,{value:null===n||void 0===n?void 0:n.department,placeholder:"\u0412\u0430\u0448\u0430 \u043a\u0430\u0444\u0435\u0434\u0440\u0430"})}),"student"===(null===n||void 0===n?void 0:n.status)&&Object(O.jsx)(me.a.Item,{name:"group",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0432\u0430\u0448\u043e\u0457 \u0433\u0440\u0443\u043f\u0438",whitespace:!0}],initialValue:n.group,children:Object(O.jsx)(ye.a,{placeholder:"\u0412\u0430\u0448\u0430 \u0433\u0440\u0443\u043f\u0430"})}),Object(O.jsx)(me.a.Item,{children:Object(O.jsxs)(jn.b,{children:[Object(O.jsx)(C.a,{type:"primary",htmlType:"submit",loading:t,children:"\u0417\u0430\u0441\u0442\u043e\u0441\u0443\u0432\u0430\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"}),Object(O.jsx)(C.a,{onClick:function(){return s(rn())},children:"\u0412\u0438\u0439\u0442\u0438 \u0437 \u0430\u043a\u0430\u0443\u043d\u0442\u0443"})]})})]})})]})},fn=function(){var e=j((function(e){return e.auth.id})),n=Object(o.h)();Object(r.useEffect)((function(){e&&n("/")}),[e,n])},bn=function(){var e=j((function(e){return e.auth.isSigningIn})),n=j((function(e){return e.auth.signingInError})),t=p();fn(),f(n,sn);return Object(O.jsx)("div",{className:"w-96 ml-auto mr-auto self-center",children:Object(O.jsxs)(me.a,{name:"login",onFinish:function(e){t(nn(e))},children:[Object(O.jsx)(me.a.Item,{name:"login",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d",whitespace:!0}],children:Object(O.jsx)(ye.a,{placeholder:"\u041b\u043e\u0433\u0456\u043d"})}),Object(O.jsx)(me.a.Item,{name:"password",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",whitespace:!0}],children:Object(O.jsx)(ye.a.Password,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(O.jsxs)(me.a.Item,{children:[Object(O.jsx)(C.a,{type:"primary",htmlType:"submit",loading:e,children:"\u0412\u0456\u0439\u0442\u0438"}),Object(O.jsx)(i.b,{to:"/sign-up",children:Object(O.jsx)("div",{className:"inline-block text-blue-500 py-1 px-3 hover:text-blue-400 focus:text-blue-400",children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f"})})]})]})})},gn=t(116),xn=gn.a.Option,On=function(){var e=j((function(e){return e.auth.isSigningUp})),n=j((function(e){return e.auth.signingUpError})),t=p();f(n,un);var a=Object(r.useState)(null),c=Object(l.a)(a,2),s=c[0],u=c[1];fn();return Object(O.jsx)("div",{className:"w-96 ml-auto mr-auto self-center",children:Object(O.jsxs)(me.a,{name:"registration",onFinish:function(e){t(tn(e))},children:[Object(O.jsx)(me.a.Item,{name:"login",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d",whitespace:!0},{min:4,message:"\u041b\u043e\u0433\u0456\u043d \u043f\u043e\u0432\u0438\u043d\u0435\u043d \u0431\u0443\u0442\u0438 \u043d\u0435 \u043a\u043e\u0440\u043e\u0442\u0448\u0435 \u0437\u0430 4 \u0441\u0438\u043c\u0432\u043e\u043b\u0438"}],children:Object(O.jsx)(ye.a,{placeholder:"\u041b\u043e\u0433\u0456\u043d"})}),Object(O.jsx)(me.a.Item,{name:"password",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",whitespace:!0},{min:6,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u0432\u0438\u043d\u0435\u043d \u0431\u0443\u0442\u0438 \u043d\u0435 \u043a\u043e\u0440\u043e\u0442\u0448\u0435 \u0437\u0430 6 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"}],children:Object(O.jsx)(ye.a.Password,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(O.jsx)(me.a.Item,{name:"name",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0432\u043e\u0454 \u0456\u043c'\u044f",whitespace:!0}],children:Object(O.jsx)(ye.a,{placeholder:"\u041f.\u0406.\u0411."})}),Object(O.jsx)(me.a.Item,{name:"status",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u0441\u0432\u0456\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"}],children:Object(O.jsxs)(gn.a,{placeholder:"\u0412\u0430\u0448 \u0441\u0442\u0430\u0442\u0443\u0441",onChange:function(e){u(e)},children:[Object(O.jsx)(xn,{value:"student",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(O.jsx)(xn,{value:"lecturer",children:"\u0412\u0438\u043a\u043b\u0430\u0434\u0430\u0447"})]})}),Object(O.jsx)(me.a.Item,{name:"department",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0412\u0430\u0448\u043e\u0457 \u043a\u0430\u0444\u0435\u0434\u0440\u0438",whitespace:!0}],children:Object(O.jsx)(ye.a,{placeholder:"\u0412\u0430\u0448\u0430 \u043a\u0430\u0444\u0435\u0434\u0440\u0430"})}),"student"===s&&Object(O.jsx)(me.a.Item,{name:"group",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0412\u0430\u0448\u043e\u0457 \u0433\u0440\u0443\u043f\u0438",whitespace:!0}],children:Object(O.jsx)(ye.a,{placeholder:"\u0412\u0430\u0448\u0430 \u0433\u0440\u0443\u043f\u0430"})}),Object(O.jsxs)(me.a.Item,{children:[Object(O.jsx)(C.a,{type:"primary",htmlType:"submit",loading:e,children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f"}),Object(O.jsx)(i.b,{to:"/sign-in",children:Object(O.jsx)("div",{className:"inline-block text-blue-500 py-1 px-3 hover:text-blue-400 focus:text-blue-400",children:"\u0412\u0445\u0456\u0434"})})]})]})})},mn=Object(R.b)("app/init",function(){var e=Object(k.a)(I.a.mark((function e(n,t){var r,a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,a=t.getState,c=a(),e.next=4,Promise.all([r(L(n)),r(M({portion:c.user.lastPortion+1,count:c.user.count}))]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),vn=Object(R.c)({name:"app",initialState:{isInit:!1,isIniting:!1,error:null},reducers:{initChanged:function(e,n){e.isInit=n.payload}},extraReducers:function(e){e.addCase(mn.pending,(function(e){e.isIniting=!0})).addCase(mn.fulfilled,(function(e){e.isIniting=!1,e.isInit=!0,e.error=null})).addCase(mn.rejected,(function(e,n){var t;e.isIniting=!1,e.isInit=!1,e.error=null!==(t=n.error.message)&&void 0!==t?t:null}))}}),Cn=(vn.actions.initChanged,vn.reducer),yn=function(e){var n=e.children;return j((function(e){return e.auth.id}))?n:Object(O.jsx)(o.a,{to:"/sign-in"})},wn=function(){var e=j((function(e){return e.auth.id})),n=j((function(e){return e.app.isInit})),t=j((function(e){return e.app.isIniting})),a=j((function(e){return e.auth.isAuthorizing})),c=j((function(e){return e.app.error})),s=j((function(e){return e.auth.authError})),i=null!==c&&void 0!==c?c:s,u=t||a,l=p();return Object(r.useEffect)((function(){n||c||l(en())}),[l,c,n]),Object(r.useEffect)((function(){e&&l(mn(e))}),[e,l]),i?Object(O.jsx)(dn,{error:i,loading:u}):u&&!i?Object(O.jsx)(Ke,{}):Object(O.jsxs)("div",{className:"box-border h-screen flex flex-col",children:[Object(O.jsx)(Ye,{}),Object(O.jsx)("section",{className:"flex-grow flex overflow-hidden",children:Object(O.jsxs)(o.e,{children:[Object(O.jsxs)(o.c,{path:"/",element:Object(O.jsx)(Ie,{}),children:[Object(O.jsx)(o.c,{index:!0,element:Object(O.jsx)(yn,{children:Object(O.jsx)(Me,{})})}),Object(O.jsx)(o.c,{path:"/channel/:channelId",element:Object(O.jsx)(yn,{children:Object(O.jsx)(Le,{})})}),Object(O.jsx)(o.c,{path:"/chat/:userId",element:Object(O.jsx)(yn,{children:Object(O.jsx)(Me,{})})}),Object(O.jsx)(o.c,{path:"/settings",element:Object(O.jsx)(yn,{children:Object(O.jsx)(hn,{})})}),Object(O.jsx)(o.c,{path:"*",element:Object(O.jsx)(pn,{})})]}),Object(O.jsx)(o.c,{path:"/sign-in",element:Object(O.jsx)(bn,{})}),Object(O.jsx)(o.c,{path:"/sign-up",element:Object(O.jsx)(On,{})}),Object(O.jsx)(o.c,{path:"*",element:Object(O.jsx)(pn,{})})]})})]})},En=Object(R.a)({reducer:{auth:ln,user:Q,channel:pe,post:ze,app:Cn}});s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(u.a,{store:En,children:Object(O.jsx)(i.a,{children:Object(O.jsx)(wn,{})})})}),document.getElementById("root"))}},[[413,1,2]]]);
//# sourceMappingURL=main.3de05ba6.chunk.js.map