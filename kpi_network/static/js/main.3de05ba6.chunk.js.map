{"version":3,"sources":["app/hooks.ts","components/AsideChannels/AsideChannelsItem.tsx","components/AsideChannels/AsideChannel.tsx","app/api.ts","features/channel/channelAPI.ts","features/user/userAPI.ts","features/user/userSlice.ts","features/channel/channelSlice.ts","components/AsideChannels/AsideButton.tsx","components/AsideChannels/AsideChannels.tsx","components/AsideContacts/AsideContacts.tsx","components/Channel/CreateChannelForm.tsx","components/Channel/EditChannelForm.tsx","components/Body.tsx","components/Channel/Display.tsx","features/post/postAPI.ts","features/post/postSlice.ts","components/Channel/Field.tsx","components/Channel/Channel.tsx","components/EmptyMain.tsx","assets/logo.png","components/Header/HeaderLogo.tsx","components/Header/HeaderMiddle.tsx","components/Header/HeaderUser.tsx","components/Header/Header.tsx","components/Init.tsx","features/auth/authAPI.ts","features/auth/authSlice.ts","components/InitError.tsx","components/NotFound.tsx","components/Settings.tsx","features/auth/hooks.ts","components/SignIn.tsx","components/SignUp.tsx","features/app/appSlice.ts","features/auth/PrivateRoute.tsx","App.tsx","app/store.ts","index.tsx"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","useImageUpload","url","useState","img","setImg","getBase64","callback","reader","FileReader","addEventListener","result","readAsDataURL","handleChange","info","file","status","originFileObj","imageUrl","beforeUpload","isJpgOrPng","type","message","error","isLt2M","size","dummyRequest","onSuccess","setTimeout","useErrorMessage","removeAction","dispatch","useEffect","useSuccessMessage","msg","isSucceed","success","AsideChannelsItem","children","className","AsideChannel","channel","to","id","isActive","title","name","placement","src","photo","toUpperCase","template","axios","create","baseURL","withCredentials","channelAPI","get","post","put","page","count","userAPI","userData","fetchUser","createAsyncThunk","a","rejectWithValue","response","data","errors","statusText","updateUser","getState","state","user","fetchUserChannels","portion","userSlice","createSlice","initialState","isFetching","fetchingError","isUpdating","updateSucceed","updatingError","channels","lastPortion","total","isChannelsFetching","channelsFetchingError","reducers","addChannel","action","push","payload","userChanged","userChannelsChanged","channelsFetchingErrorChanged","updateSucceedChanged","updatingErrorChanged","extraReducers","builder","addCase","pending","fulfilled","rejected","items","actions","fetchChannel","fetchPosts","createChannel","creatorClosed","editChannel","editorClosed","channelSlice","posts","totalPosts","isPostFetching","postFetchingError","isCreatorOpened","isCreating","creationError","createdSucceed","isEditorOpened","isEditing","editingError","editedSucceed","creatorOpened","editorOpened","creationErrorChanged","createdSucceedChanged","editedSucceedChanged","postsChanged","postAdded","AsideButton","icon","PlusOutlined","shape","onClick","AsideChannels","isLoading","hide","loading","onScroll","e","scrollHeight","currentTarget","clientHeight","scrollTop","map","reverse","AsideContacts","navigate","useNavigate","userId","useParams","renderEmpty","image","Empty","PRESENTED_IMAGE_SIMPLE","description","length","itemLayout","dataSource","renderItem","item","Item","Meta","avatar","CreateChannelForm","isOpened","succeed","Form","useForm","form","resetFields","centered","visible","onOk","submit","onCancel","okButtonProps","cancelButtonProps","disabled","width","showUploadList","customRequest","onChange","MessageOutlined","onFinish","formData","console","log","rules","required","whitespace","placeholder","initialValue","EditChannelForm","Body","Display","undefined","UserOutlined","author","text","postAPI","sendPost","channelId","statuses","includes","postSlice","isSending","sendingError","TextArea","Input","Field","trim","noStyle","autoFocus","autoSize","maxRows","minRows","onPressEnter","shiftKey","preventDefault","Channel","params","bodyStyle","display","flexDirection","justifyContent","overflowY","height","subTitle","extra","Link","Paragraph","Typography","EmptyMain","strong","HeaderLogo","logo","alt","HeaderMiddle","HeaderUser","authUser","login","Header","Init","tip","authAPI","password","delete","authorize","signIn","signUp","signOut","_","authSlice","isAuthorizing","authError","isSigningIn","signingInError","isSigningUp","signingUpError","isSigningOut","signingOutError","signingInErrorChanged","signingUpErrorChanged","signingOutErrorChanged","InitError","NotFound","Settings","auth","values","department","value","group","htmlType","useRedirectFromAuth","authId","SignIn","Password","Option","Select","SignUp","setStatus","min","init","Promise","all","appSlice","isInit","isIniting","initChanged","PrivateRoute","App","app","initError","path","element","index","store","configureStore","reducer","authReducer","userReducer","channelReducer","postReducer","appReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3de05ba6.chunk.js","sourcesContent":["import { ActionCreatorWithPayload } from '@reduxjs/toolkit';\nimport { UploadRequestOption } from 'rc-upload/lib/interface';\nimport { UploadFile } from 'antd/lib/upload/interface';\nimport { UploadChangeParam, RcFile } from 'antd/lib/upload';\nimport { useState, useEffect } from 'react';\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\nimport { message } from 'antd';\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\nexport const useImageUpload = (url: any) => {\n  const [img, setImg] = useState(url);\n\n  const handleChange = (info: UploadChangeParam<UploadFile<any>>) => {\n    if (info.file.status === 'done') {\n      getBase64(info.file.originFileObj, (imageUrl) => {\n        setImg(imageUrl);\n      });\n    }\n  };\n\n  const dummyRequest = ({ onSuccess }: UploadRequestOption<any>) => {\n    setTimeout(() => {\n      if (onSuccess) {\n        onSuccess('ok');\n      }\n    }, 0);\n  };\n\n  const getBase64 = (\n    img: RcFile | undefined,\n    callback: (url: string | null) => void\n  ) => {\n    const reader = new FileReader();\n    reader.addEventListener('load', () =>\n      callback(reader.result as string | null)\n    );\n    reader.readAsDataURL(img as Blob);\n  };\n\n  const beforeUpload = (file: File) => {\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n    if (!isJpgOrPng) {\n      message.error('Будь ласка, завантажте JPG або PNG файл!');\n    }\n    const isLt2M = file.size / 1024 / 1024 < 2;\n    if (!isLt2M) {\n      message.error('Зображення має важити не більше 2MB!');\n    }\n    return isJpgOrPng && isLt2M;\n  };\n\n  return {\n    img,\n    setImg,\n    handleChange,\n    beforeUpload,\n    dummyRequest,\n  };\n};\n\nexport const useErrorMessage = (\n  error: string | null,\n  removeAction?: ActionCreatorWithPayload<null | string>\n) => {\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    if (error) {\n      message.error(error);\n      if (removeAction) {\n        dispatch(removeAction(null));\n      }\n    }\n  }, [error, dispatch, removeAction]);\n};\n\nexport const useSuccessMessage = (\n  msg: string,\n  isSucceed: boolean,\n  removeAction?: ActionCreatorWithPayload<null | string>\n) => {\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    if (isSucceed) {\n      message.success(msg);\n      if (removeAction) {\n        dispatch(removeAction(null));\n      }\n    }\n  }, [isSucceed, dispatch, removeAction, msg]);\n};\n\nexport const useLoading = (msg: string, isLoading: boolean) => {\n  useEffect(() => {\n    let hide = () => {};\n    if (isLoading) {\n      hide = message.loading(msg);\n    } else {\n      hide();\n    }\n  }, [isLoading, msg]);\n};\n","import React from 'react';\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport const AsideChannelsItem: React.FC<Props> = ({ children }) => {\n  return (\n    <div className=\"w-18 flex justify-center items-center p-2\">{children}</div>\n  );\n};\n","import React from 'react';\nimport { Avatar, Tooltip } from 'antd';\nimport { AsideChannelsItem } from './AsideChannelsItem';\nimport { NavLink } from 'react-router-dom';\nimport { ChannelPreview } from '../../app/types';\n\ninterface Props {\n  channel: ChannelPreview;\n}\n\nexport const AsideChannel: React.FC<Props> = ({ channel }) => {\n  return (\n    <NavLink\n      to={`channel/${channel.id}`}\n      className={({ isActive }) => (isActive ? 'bg-blue-100 rounded-lg' : '')}\n    >\n      <AsideChannelsItem>\n        <Tooltip title={channel.name} placement=\"right\">\n          <Avatar size={48} src={channel.photo}>\n            {channel.name[0].toUpperCase()}\n          </Avatar>\n        </Tooltip>\n      </AsideChannelsItem>\n    </NavLink>\n  );\n};\n","import axios from 'axios';\n\nexport const template = axios.create({\n  baseURL: 'https://kpi-network.herokuapp.com/',\n  withCredentials: true,\n});\n","import { template } from '../../app/api';\nimport {\n  Response,\n  Channel,\n  WithId,\n  WithPhoto,\n  ChannelCreatedData,\n  ItemsResponse,\n  Post,\n} from './../../app/types';\n\nexport const channelAPI = {\n  get: (id: number) => {\n    return template.get<Response<Channel & WithId & WithPhoto>>(\n      `channel/${id}`\n    );\n  },\n\n  create: (channel: Channel & WithPhoto) => {\n    return template.post<Response<ChannelCreatedData>>('channel', {\n      ...channel,\n    });\n  },\n\n  update: (channel: Channel & WithId & WithPhoto) => {\n    return template.put<Response<Channel & WithId & WithPhoto>>(\n      `channel/${channel.id}`,\n      { ...channel }\n    );\n  },\n\n  getPosts: ({\n    id,\n    page,\n    count,\n  }: {\n    id: number;\n    page: number;\n    count: number;\n  }) => {\n    return template.get<ItemsResponse<(Post & WithId)[]>>(\n      `channel/${id}/posts?page=${page}&count=${count}`\n    );\n  },\n};\n","import { template } from './../../app/api';\nimport { SettingsFormValues } from './../../components/Settings';\nimport {\n  Response,\n  WithPhoto,\n  User,\n  WithId,\n  ItemsResponse,\n  ChannelPreview,\n} from './../../app/types';\n\nexport const userAPI = {\n  get: (id: number) => {\n    return template.get<Response<User & WithId & WithPhoto>>(`user/${id}`);\n  },\n\n  update: (userData: SettingsFormValues & WithPhoto) => {\n    return template.put<Response<{}>>('user', {\n      ...userData,\n    });\n  },\n\n  getChannels: (page: number, count: number) => {\n    return template.get<ItemsResponse<ChannelPreview[]>>(\n      `/user/channels?page=${page}&count=${count}`\n    );\n  },\n};\n","import { AxiosError } from 'axios';\nimport { SettingsFormValues } from './../../components/Settings';\nimport { userAPI } from './userAPI';\nimport {\n  User,\n  ChannelPreview,\n  WithId,\n  WithPhoto,\n  Response,\n  ItemsResponse,\n} from './../../app/types';\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nexport interface UserState {\n  user: (User & WithId & WithPhoto) | null;\n  isFetching: boolean;\n  fetchingError: string | null;\n\n  isUpdating: boolean;\n  updateSucceed: boolean;\n  updatingError: string | null;\n\n  channels: ChannelPreview[];\n  count: number;\n  lastPortion: number;\n  total: number | null;\n\n  isChannelsFetching: boolean;\n  channelsFetchingError: string | null;\n}\n\nconst initialState: UserState = {\n  user: null,\n  isFetching: false,\n  fetchingError: null,\n\n  isUpdating: false,\n  updateSucceed: false,\n  updatingError: null,\n\n  channels: [],\n  count: 10,\n  lastPortion: 0,\n  total: null,\n  isChannelsFetching: false,\n  channelsFetchingError: null,\n};\n\nexport const fetchUser = createAsyncThunk<\n  Response<User & WithId & WithPhoto>,\n  number,\n  {\n    rejectValue: string;\n  }\n>('user/fetched', async (id: number, { rejectWithValue }) => {\n  try {\n    const response = await userAPI.get(id);\n    if (response.data.errors[0]) {\n      return rejectWithValue(response.data.errors[0]);\n    }\n\n    return response.data;\n  } catch (e) {\n    const error = e as AxiosError;\n    if (error.response && error.response.status === 401) {\n      return rejectWithValue(error.response.data.errors[0]);\n    }\n    return rejectWithValue(error.response?.statusText ?? 'Some error occured');\n  }\n});\n\nexport const updateUser = createAsyncThunk<\n  User & WithPhoto & WithId,\n  SettingsFormValues & WithPhoto,\n  {\n    rejectValue: string;\n  }\n>(\n  'user/updated',\n  async (\n    userData: SettingsFormValues & WithPhoto,\n    { rejectWithValue, getState }\n  ) => {\n    const state = getState() as { user: UserState };\n\n    try {\n      const response = await userAPI.update(userData);\n      if (response.data.errors[0]) {\n        return rejectWithValue(response.data.errors[0]);\n      }\n\n      return {\n        ...state.user.user,\n        ...userData,\n      } as User & WithPhoto & WithId;\n    } catch (e) {\n      const error = e as AxiosError;\n      if (error.response && error.response.status === 401) {\n        return rejectWithValue(error.response.data.errors[0]);\n      }\n      return rejectWithValue(\n        error.response?.statusText ?? 'Some error occured'\n      );\n    }\n  }\n);\n\nexport const fetchUserChannels = createAsyncThunk<\n  ItemsResponse<ChannelPreview[]>,\n  { portion: number; count: number },\n  {\n    rejectValue: string;\n  }\n>(\n  'user/channels_fetched',\n  async (\n    { portion, count }: { portion: number; count: number },\n    { rejectWithValue }\n  ) => {\n    try {\n      const response = await userAPI.getChannels(portion, count);\n      if (response.data.errors[0]) {\n        return rejectWithValue(response.data.errors[0]);\n      }\n\n      return response.data;\n    } catch (e) {\n      const error = e as AxiosError;\n      if (error.response && error.response.status === 401) {\n        return rejectWithValue(error.response.data.errors[0]);\n      }\n      return rejectWithValue(\n        error.response?.statusText ?? 'Some error occured'\n      );\n    }\n  }\n);\n\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    addChannel: (state, action) => {\n      state.channels.push(action.payload);\n    },\n\n    userChanged: (state, action) => {\n      state.user = action.payload;\n    },\n\n    userChannelsChanged: (state, action) => {\n      state.channels = action.payload;\n    },\n\n    channelsFetchingErrorChanged: (state, action) => {\n      state.channelsFetchingError = action.payload;\n    },\n\n    updateSucceedChanged: (state, action) => {\n      state.updateSucceed = action.payload;\n    },\n\n    updatingErrorChanged: (state, action) => {\n      state.updatingError = action.payload;\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchUser.pending, (state) => {\n        state.isFetching = true;\n      })\n      .addCase(fetchUser.fulfilled, (state, action) => {\n        state.isFetching = false;\n        state.user = action.payload.data;\n      })\n      .addCase(fetchUser.rejected, (state, action) => {\n        state.fetchingError = action.payload ?? null;\n        state.isFetching = false;\n      })\n\n      .addCase(updateUser.pending, (state) => {\n        state.isUpdating = true;\n      })\n      .addCase(updateUser.fulfilled, (state, action) => {\n        state.isUpdating = false;\n        state.updateSucceed = true;\n        state.user = action.payload;\n      })\n      .addCase(updateUser.rejected, (state, action) => {\n        state.updatingError = action.payload ?? null;\n        state.isUpdating = false;\n      })\n\n      .addCase(fetchUserChannels.pending, (state) => {\n        state.isChannelsFetching = true;\n      })\n      .addCase(fetchUserChannels.fulfilled, (state, action) => {\n        state.isChannelsFetching = false;\n        state.channels = [...state.channels, ...action.payload.data.items];\n        state.lastPortion += 1;\n\n        state.total = action.payload.data.total;\n      })\n      .addCase(fetchUserChannels.rejected, (state, action) => {\n        state.channelsFetchingError = action.payload ?? null;\n        state.isChannelsFetching = false;\n      });\n  },\n});\n\nexport const {\n  addChannel,\n  userChanged,\n  userChannelsChanged,\n  updateSucceedChanged,\n  updatingErrorChanged,\n  channelsFetchingErrorChanged,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n","import {\n  Channel,\n  ChannelCreatedData,\n  ItemsResponse,\n  Post,\n  Response,\n  WithId,\n  WithPhoto,\n} from './../../app/types';\nimport { channelAPI } from './channelAPI';\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { addChannel } from '../user/userSlice';\nimport { AxiosError } from 'axios';\n\nexport interface ChannelState {\n  channel: (Channel & WithId & WithPhoto) | null;\n\n  posts: (Post & WithId)[] | null;\n  totalPosts: number | null;\n  count: number;\n  lastPortion: number;\n  isPostFetching: boolean;\n  postFetchingError: string | null;\n\n  isCreatorOpened: boolean;\n  isCreating: boolean;\n  creationError: null | string;\n  createdSucceed: boolean;\n\n  isEditorOpened: boolean;\n  isEditing: boolean;\n  editingError: null | string;\n  editedSucceed: boolean;\n\n  isFetching: boolean;\n  fetchingError: string | null;\n}\n\nconst initialState: ChannelState = {\n  channel: null,\n\n  posts: null,\n  totalPosts: null,\n  count: 10,\n  lastPortion: 0,\n  isPostFetching: false,\n  postFetchingError: null,\n\n  isCreatorOpened: false,\n  isCreating: false,\n  creationError: null,\n  createdSucceed: false,\n\n  isEditorOpened: false,\n  isEditing: false,\n  editingError: null,\n  editedSucceed: false,\n\n  isFetching: false,\n  fetchingError: null,\n};\n\nexport const fetchChannel = createAsyncThunk<\n  Response<Channel & WithId & WithPhoto>,\n  number,\n  { rejectValue: string }\n>(\n  'channel/fetched',\n  async (id: number, { rejectWithValue, dispatch, getState }) => {\n    const state = getState() as { channel: ChannelState };\n    try {\n      const response = await channelAPI.get(id);\n      if (response.data.errors[0]) {\n        return rejectWithValue(response.data.errors[0]);\n      }\n\n      dispatch(\n        fetchPosts({\n          id,\n          page: state.channel.lastPortion + 1,\n          count: state.channel.count,\n        })\n      );\n\n      return response.data;\n    } catch (e) {\n      const error = e as AxiosError;\n      if (error.response && error.response.status === 404) {\n        return rejectWithValue(error.response.data.errors[0]);\n      }\n      return rejectWithValue(\n        error.response?.statusText ?? 'Some error occured'\n      );\n    }\n  }\n);\n\nexport const createChannel = createAsyncThunk<\n  Response<ChannelCreatedData>,\n  Channel & WithPhoto,\n  { rejectValue: string }\n>(\n  'channel/created',\n  async (channel: Channel & WithPhoto, { dispatch, rejectWithValue }) => {\n    try {\n      const response = await channelAPI.create(channel);\n\n      if (response.data.errors[0]) {\n        return rejectWithValue(response.data.errors[0]);\n      }\n\n      if (response.data.data.id) {\n        dispatch(\n          addChannel({\n            id: response.data.data.id,\n            ...channel,\n          })\n        );\n        dispatch(creatorClosed());\n      }\n\n      return response.data;\n    } catch (e) {\n      const error = e as AxiosError;\n      if (error.response && error.response.status === 401) {\n        return rejectWithValue(error.response.data.errors[0]);\n      }\n\n      return rejectWithValue(\n        error.response?.statusText ?? 'Some error occured'\n      );\n    }\n  }\n);\n\nexport const editChannel = createAsyncThunk<\n  Channel & WithId & WithPhoto,\n  Channel & WithId & WithPhoto,\n  { rejectValue: string }\n>(\n  'channel/edited',\n  async (\n    channel: Channel & WithId & WithPhoto,\n    { dispatch, rejectWithValue }\n  ) => {\n    try {\n      const response = await channelAPI.update(channel);\n\n      if (response.data.errors[0]) {\n        return rejectWithValue(response.data.errors[0]);\n      }\n      dispatch(editorClosed());\n\n      return channel;\n    } catch (e) {\n      const error = e as AxiosError;\n      if (error.response && error.response.status === 401) {\n        return rejectWithValue(error.response.data.errors[0]);\n      }\n\n      return rejectWithValue(\n        error.response?.statusText ?? 'Some error occured'\n      );\n    }\n  }\n);\n\nexport const fetchPosts = createAsyncThunk<\n  ItemsResponse<(Post & WithId)[]>,\n  {\n    id: number;\n    page: number;\n    count: number;\n  },\n  { rejectValue: string }\n>('channel/postsFetched', async ({ id, page, count }, { rejectWithValue }) => {\n  try {\n    const response = await channelAPI.getPosts({ id, page, count });\n\n    if (response.data.errors[0]) {\n      return rejectWithValue(response.data.errors[0]);\n    }\n\n    return response.data;\n  } catch (e) {\n    const error = e as AxiosError;\n\n    return rejectWithValue(error.response?.statusText ?? 'Some error occured');\n  }\n});\n\nconst channelSlice = createSlice({\n  name: 'channel',\n  initialState,\n  reducers: {\n    creatorOpened: (state) => {\n      state.isCreatorOpened = true;\n    },\n\n    creatorClosed: (state) => {\n      state.isCreatorOpened = false;\n    },\n\n    editorOpened: (state) => {\n      state.isEditorOpened = true;\n    },\n\n    editorClosed: (state) => {\n      state.isEditorOpened = false;\n    },\n\n    creationErrorChanged: (state, action) => {\n      state.creationError = action.payload;\n    },\n\n    createdSucceedChanged: (state, action) => {\n      state.createdSucceed = action.payload;\n    },\n\n    editedSucceedChanged: (state, action) => {\n      state.editedSucceed = action.payload;\n    },\n\n    postsChanged: (state, action) => {\n      state.posts = action.payload;\n    },\n\n    postAdded: (state, action) => {\n      if (state.posts) {\n        state.posts.push(action.payload);\n      } else {\n        state.posts = [action.payload];\n      }\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchChannel.pending, (state) => {\n        state.isFetching = true;\n      })\n      .addCase(fetchChannel.fulfilled, (state, action) => {\n        state.isFetching = false;\n        state.channel = action.payload.data;\n        state.fetchingError = null;\n      })\n      .addCase(fetchChannel.rejected, (state, action) => {\n        state.channel = null;\n        state.isFetching = false;\n        state.fetchingError = action.payload ?? null;\n      })\n\n      .addCase(createChannel.pending, (state) => {\n        state.isCreating = true;\n      })\n      .addCase(createChannel.fulfilled, (state) => {\n        state.isCreating = false;\n        state.createdSucceed = true;\n      })\n      .addCase(createChannel.rejected, (state, action) => {\n        state.isCreating = false;\n        state.creationError = action.payload ?? null;\n      })\n\n      .addCase(editChannel.pending, (state) => {\n        state.isEditing = true;\n      })\n      .addCase(editChannel.fulfilled, (state, action) => {\n        state.isEditing = false;\n        state.channel = action.payload;\n      })\n      .addCase(editChannel.rejected, (state, action) => {\n        state.isEditing = false;\n        state.editingError = action.payload ?? null;\n      })\n\n      .addCase(fetchPosts.pending, (state) => {\n        state.isPostFetching = true;\n      })\n      .addCase(fetchPosts.fulfilled, (state, action) => {\n        state.isPostFetching = false;\n        if (!state.posts) {\n          state.posts = action.payload.data.items;\n        } else {\n          state.posts = [...state.posts, ...action.payload.data.items];\n        }\n        state.lastPortion += 1;\n        state.totalPosts = action.payload.data.total;\n      })\n      .addCase(fetchPosts.rejected, (state, action) => {\n        state.isPostFetching = false;\n        state.editingError = action.payload ?? null;\n      });\n  },\n});\n\nexport const {\n  creatorOpened,\n  creatorClosed,\n  editorOpened,\n  editorClosed,\n  creationErrorChanged,\n  createdSucceedChanged,\n  editedSucceedChanged,\n  postsChanged,\n  postAdded,\n} = channelSlice.actions;\n\nexport default channelSlice.reducer;\n","import React from 'react';\nimport { Button } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\n\nimport { AsideChannelsItem } from './AsideChannelsItem';\nimport { useAppDispatch } from '../../app/hooks';\nimport { creatorOpened } from '../../features/channel/channelSlice';\n\nexport const AsideButton: React.FC = () => {\n  const dispatch = useAppDispatch();\n\n  const openForm = () => {\n    dispatch(creatorOpened());\n  };\n\n  return (\n    <AsideChannelsItem>\n      <Button\n        icon={<PlusOutlined className=\"text-2xl\" />}\n        shape=\"circle\"\n        className=\"w-12 h-12\"\n        onClick={openForm}\n      />\n    </AsideChannelsItem>\n  );\n};\n","import React, { UIEvent } from 'react';\n\nimport { AsideChannel } from './AsideChannel';\nimport { AsideButton } from './AsideButton';\nimport {\n  useAppDispatch,\n  useAppSelector,\n  useErrorMessage,\n  useLoading,\n} from '../../app/hooks';\nimport {\n  channelsFetchingErrorChanged,\n  fetchUserChannels,\n} from '../../features/user/userSlice';\n\nexport const AsideChannels: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const channels = useAppSelector((state) => state.user.channels);\n  const total = useAppSelector((state) => state.user.total);\n  const count = useAppSelector((state) => state.user.count);\n  const isFetching = useAppSelector((state) => state.user.isChannelsFetching);\n  const error = useAppSelector((state) => state.user.channelsFetchingError);\n\n  useErrorMessage(error, channelsFetchingErrorChanged);\n  useLoading('Завантження каналів...', isFetching);\n\n  const lastPortion = useAppSelector((state) => state.user.lastPortion);\n\n  const scrollHandler = (e: UIEvent<HTMLElement>) => {\n    if (!isFetching && (total === null || lastPortion * count < total)) {\n      const scrollHeight = e.currentTarget.scrollHeight;\n      const clientHeight = e.currentTarget.clientHeight;\n\n      const top = e.currentTarget.scrollTop;\n      let bottom = scrollHeight - top - clientHeight;\n      if (bottom < 30) {\n        dispatch(fetchUserChannels({ portion: lastPortion + 1, count }));\n      }\n    }\n  };\n\n  return (\n    <aside\n      className=\"flex flex-col items-center bg-gray-100 overflow-y-scroll\"\n      onScroll={scrollHandler}\n    >\n      <AsideButton />\n\n      {channels\n        .map((channel) => <AsideChannel key={channel.id} channel={channel} />)\n        .reverse()}\n    </aside>\n  );\n};\n","import { Avatar, List, ConfigProvider, Empty } from 'antd';\nimport React from 'react';\nimport { Link, NavLink, useNavigate, useParams } from 'react-router-dom';\n\nconst data: { id: number; title: string }[] = [\n  // {\n  //   id: 1,\n  //   title: 'me',\n  // },\n  // {\n  //   id: 2,\n  //   title: 'me',\n  // },\n  // {\n  //   id: 3,\n  //   title: 'me',\n  // },\n  // {\n  //   id: 4,\n  //   title: 'me',\n  // },\n  // {\n  //   id: 5,\n  //   title: 'me',\n  // },\n];\n\nexport const AsideContacts: React.FC = () => {\n  const navigate = useNavigate();\n  const params = useParams();\n  const userId = params.userId;\n\n  return (\n    <aside className=\"flex-none w-56 border-l-2 p-2\">\n      <ConfigProvider\n        renderEmpty={() => (\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description=\"Ви поки що не маєте контактів\"\n          />\n        )}\n      >\n        <List\n          className={`w-full h-full ${!data.length && 'flex items-center'}`}\n          itemLayout=\"horizontal\"\n          dataSource={data}\n          renderItem={(item) => (\n            <List.Item\n              className={\n                userId && +userId === item.id\n                  ? 'bg-blue-100 rounded-md cursor-pointer'\n                  : 'cursor-pointer'\n              }\n              onClick={() => navigate(`chat/${item.id}`)}\n            >\n              <List.Item.Meta\n                avatar={<Avatar src=\"https://joeschmoe.io/api/v1/random\" />}\n                title={item.title}\n                description={\n                  <p className=\"truncate\">\n                    Lorem, ipsum dolor sit amet consectetur adipisicing elit.\n                    Dolorem doloribus non vel voluptatem aspernatur soluta esse\n                    impedit, doloremque sequi quae nihil, quod excepturi magni\n                    aut fuga aperiam quaerat temporibus debitis?\n                  </p>\n                }\n              />\n            </List.Item>\n          )}\n        />\n      </ConfigProvider>\n    </aside>\n  );\n};\n","import { Modal, Form, Input, Upload, Avatar } from 'antd';\nimport { MessageOutlined } from '@ant-design/icons';\nimport React, { useEffect } from 'react';\nimport {\n  useAppDispatch,\n  useAppSelector,\n  useImageUpload,\n  useErrorMessage,\n  useSuccessMessage,\n} from '../../app/hooks';\nimport {\n  createChannel,\n  creatorClosed,\n  creationErrorChanged,\n  createdSucceedChanged,\n} from '../../features/channel/channelSlice';\nimport { Channel } from '../../app/types';\n\nexport const CreateChannelForm: React.FC = () => {\n  const isOpened = useAppSelector((state) => state.channel.isCreatorOpened);\n  const isLoading = useAppSelector((state) => state.channel.isCreating);\n  const succeed = useAppSelector((state) => state.channel.createdSucceed);\n  const error = useAppSelector((state) => state.channel.creationError);\n\n  const { img, setImg, dummyRequest, beforeUpload, handleChange } =\n    useImageUpload(null);\n  const [form] = Form.useForm();\n\n  const dispatch = useAppDispatch();\n\n  useErrorMessage(error, creationErrorChanged);\n  useSuccessMessage('Канал створено', succeed, createdSucceedChanged);\n\n  useEffect(() => {\n    if (isOpened) {\n      form.resetFields();\n      setImg(null);\n    }\n  }, [form, isOpened, setImg]);\n\n  const close = () => {\n    dispatch(creatorClosed());\n  };\n\n  const okHandler = () => {\n    form.submit();\n  };\n\n  const submitHandler = (formData: Channel) => {\n    console.log(formData);\n\n    dispatch(createChannel({ ...formData, photo: img }));\n  };\n\n  return (\n    <Modal\n      title=\"Створіть свій канал\"\n      centered\n      visible={isOpened}\n      onOk={okHandler}\n      onCancel={close}\n      okButtonProps={{ loading: isLoading }}\n      cancelButtonProps={{ disabled: isLoading }}\n      width={800}\n    >\n      <div className=\"flex gap-5\">\n        <Upload\n          name=\"channel\"\n          showUploadList={false}\n          beforeUpload={beforeUpload}\n          customRequest={dummyRequest}\n          onChange={handleChange}\n        >\n          <Avatar\n            size={200}\n            shape=\"square\"\n            src={img}\n            icon={<MessageOutlined />}\n          />\n        </Upload>\n        <Form\n          form={form}\n          name=\"createChannel\"\n          onFinish={submitHandler}\n          className=\"flex-grow\"\n        >\n          <Form.Item\n            name=\"name\"\n            rules={[\n              {\n                required: true,\n                message: 'Будь ласка, введіть назву каналу',\n                whitespace: true,\n              },\n            ]}\n          >\n            <Input placeholder=\"Назва каналу\" />\n          </Form.Item>\n\n          <Form.Item name=\"description\" initialValue={null}>\n            <Input placeholder=\"Опис каналу (не обов'язково)\" />\n          </Form.Item>\n        </Form>\n      </div>\n    </Modal>\n  );\n};\n","import { Modal, Form, Input, Upload, Avatar } from 'antd';\nimport { MessageOutlined } from '@ant-design/icons';\nimport React, { useEffect } from 'react';\nimport {\n  useAppDispatch,\n  useAppSelector,\n  useErrorMessage,\n  useImageUpload,\n  useSuccessMessage,\n} from '../../app/hooks';\nimport {\n  editChannel,\n  editedSucceedChanged,\n  editorClosed,\n} from '../../features/channel/channelSlice';\nimport { Channel } from '../../app/types';\n\nexport const EditChannelForm: React.FC = () => {\n  const channel = useAppSelector((state) => state.channel.channel);\n  const isOpened = useAppSelector((state) => state.channel.isEditorOpened);\n  const isLoading = useAppSelector((state) => state.channel.isEditing);\n  const error = useAppSelector((state) => state.channel.editingError);\n  const succeed = useAppSelector((state) => state.channel.editedSucceed);\n\n  const { img, setImg, dummyRequest, beforeUpload, handleChange } =\n    useImageUpload(channel ? channel.photo : null);\n  const [form] = Form.useForm();\n  const dispatch = useAppDispatch();\n\n  useErrorMessage(error, editedSucceedChanged);\n  useSuccessMessage('Інформацію змінено', succeed, editedSucceedChanged);\n\n  useEffect(() => {\n    if (isOpened) {\n      form.resetFields();\n      setImg(channel ? channel.photo : null);\n    }\n  }, [isOpened, form, setImg, channel]);\n\n  const close = () => {\n    dispatch(editorClosed());\n  };\n\n  const okHandler = () => {\n    form.submit();\n  };\n\n  const submitHandler = (formData: Channel) => {\n    console.log(formData);\n\n    if (channel) {\n      dispatch(\n        editChannel({\n          ...channel,\n          ...formData,\n          photo: img,\n        })\n      );\n    }\n  };\n\n  return (\n    <Modal\n      title=\"Налаштування каналу\"\n      centered\n      visible={isOpened}\n      onOk={okHandler}\n      onCancel={close}\n      okButtonProps={{ loading: isLoading }}\n      cancelButtonProps={{ disabled: isLoading }}\n      width={800}\n    >\n      <div className=\"flex gap-5\">\n        <Upload\n          name=\"channel\"\n          showUploadList={false}\n          beforeUpload={beforeUpload}\n          customRequest={dummyRequest}\n          onChange={handleChange}\n        >\n          <Avatar\n            size={200}\n            shape=\"square\"\n            src={img}\n            icon={<MessageOutlined />}\n          />\n        </Upload>\n        <Form\n          form={form}\n          name=\"editChannel\"\n          onFinish={submitHandler}\n          className=\"flex-grow\"\n        >\n          <Form.Item\n            name=\"name\"\n            initialValue={channel ? channel.name : ''}\n            rules={[\n              {\n                required: true,\n                message: 'Будь ласка, введіть назву каналу',\n                whitespace: true,\n              },\n            ]}\n          >\n            <Input placeholder=\"Назва каналу\" />\n          </Form.Item>\n\n          <Form.Item\n            name=\"description\"\n            initialValue={channel ? channel.description : ''}\n          >\n            <Input placeholder=\"Опис каналу (не обов'язково)\" />\n          </Form.Item>\n        </Form>\n      </div>\n    </Modal>\n  );\n};\n","import React from 'react';\n\nimport { AsideChannels } from './AsideChannels/AsideChannels';\nimport { AsideContacts } from './AsideContacts/AsideContacts';\nimport { Outlet } from 'react-router';\nimport { CreateChannelForm } from './Channel/CreateChannelForm';\nimport { EditChannelForm } from './Channel/EditChannelForm';\n\nexport const Body: React.FC = () => {\n  return (\n    <>\n      <AsideChannels />\n      <main className=\"flex justify-center items-center flex-grow bg-white p-6\">\n        <CreateChannelForm />\n        <EditChannelForm />\n        <Outlet />\n      </main>\n      <AsideContacts />\n    </>\n  );\n};\n","import { Avatar, ConfigProvider, Empty } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\nimport React from 'react';\nimport { List } from 'antd';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\n\nexport const Display: React.FC = () => {\n  const posts = useAppSelector((state) => state.channel.posts);\n\n  return (\n    <ConfigProvider\n      renderEmpty={() => (\n        <Empty\n          image={Empty.PRESENTED_IMAGE_SIMPLE}\n          description={\n            <span>\n              Канал наразі порожній.\n              <br /> Напишіть першим!\n            </span>\n          }\n        />\n      )}\n    >\n      <List\n        className={`flex-grow overflow-y-scroll ${\n          !posts?.length && 'flex justify-center items-center'\n        }`}\n        dataSource={posts ?? undefined}\n        renderItem={(item) => (\n          <List.Item key={item.id} className=\"bg-white rounded-sm mb-2\">\n            <List.Item.Meta\n              avatar={\n                <Avatar\n                  size=\"large\"\n                  icon={<UserOutlined />}\n                  src={item.author.photo}\n                />\n              }\n              title={item.author.name}\n              description={item.text}\n            />\n          </List.Item>\n        )}\n      />\n    </ConfigProvider>\n  );\n};\n","import { PostCreatedData } from './../../app/types';\nimport { template } from '../../app/api';\n\nimport { Response, ItemsResponse, Post, WithId } from '../../app/types';\n\nexport const postAPI = {\n  create: (post: Omit<Post, 'author'>) => {\n    return template.post<Response<PostCreatedData>>('posts', { ...post });\n  },\n};\n","import { PostCreatedData, Response } from './../../app/types';\nimport { AxiosError } from 'axios';\nimport { WithId } from '../../app/types';\nimport { postAPI } from './postAPI';\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { Post } from '../../app/types';\nimport { ChannelState, postAdded } from '../channel/channelSlice';\nimport { UserState } from '../user/userSlice';\n\nexport interface PostsState {\n  post: (Post & WithId)[] | null;\n  total: number | null;\n\n  isFetching: boolean;\n  isSending: boolean;\n  sendingError: string | null;\n\n  fetchingError: string | null;\n}\n\nconst initialState: PostsState = {\n  post: null,\n  total: null,\n\n  isSending: false,\n  sendingError: null,\n\n  isFetching: false,\n  fetchingError: null,\n};\n\nexport const sendPost = createAsyncThunk<Response<PostCreatedData>, string>(\n  'post/sended',\n  async (text: string, { getState, dispatch, rejectWithValue }) => {\n    const state = getState() as { channel: ChannelState; user: UserState };\n    const channelId = state.channel.channel?.id;\n    const user = state.user.user;\n\n    try {\n      if (channelId) {\n        const post = {\n          text,\n          channelId,\n        };\n        const response = await postAPI.create(post);\n\n        dispatch(\n          postAdded({ id: response.data.data.id, ...post, author: user })\n        );\n        return response.data;\n      }\n\n      return rejectWithValue('There is no channel id provided');\n    } catch (e) {\n      const error = e as AxiosError;\n\n      const statuses = [401, 404];\n\n      if (error.response?.status && statuses.includes(error.response.status)) {\n        return rejectWithValue(error.response.data.errors[0]);\n      } else {\n        return rejectWithValue(\n          error.response?.statusText ?? 'Some error occured'\n        );\n      }\n    }\n  }\n);\n\nconst postSlice = createSlice({\n  name: 'post',\n  initialState,\n\n  reducers: {},\n\n  extraReducers: (builder) =>\n    builder\n      .addCase(sendPost.pending, (state) => {\n        state.isSending = true;\n        state.sendingError = null;\n      })\n      .addCase(sendPost.fulfilled, (state) => {\n        state.isSending = false;\n      })\n      .addCase(sendPost.rejected, (state, action) => {\n        state.isSending = false;\n        state.sendingError = action.error.message ?? null;\n      }),\n});\n\nexport default postSlice.reducer;\n","import { Form, Input, Spin } from 'antd';\nimport Text from 'antd/lib/typography/Text';\nimport React, { useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { fetchChannel } from '../../features/channel/channelSlice';\nimport { sendPost } from '../../features/post/postSlice';\n\nconst { TextArea } = Input;\n\ninterface FormData {\n  text: string;\n}\n\nexport const Field: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const [form] = Form.useForm();\n\n  const pressHandler = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (!e.shiftKey) {\n      e.preventDefault();\n      form.submit();\n    }\n  };\n\n  const handleSubmit = (data: FormData) => {\n    form.resetFields();\n    if (data.text.trim()) {\n      dispatch(sendPost(data.text));\n    }\n  };\n\n  return (\n    <div className=\"w-full\">\n      <Form name=\"post\" form={form} onFinish={handleSubmit}>\n        <Form.Item name=\"text\" noStyle>\n          <TextArea\n            autoFocus\n            placeholder=\"Enter your message here...\"\n            autoSize={{\n              maxRows: 6,\n              minRows: 1,\n            }}\n            onPressEnter={pressHandler}\n          />\n        </Form.Item>\n      </Form>\n    </div>\n  );\n};\n","import { Button, Card, Result, Spin, Typography } from 'antd';\n\nimport React, { useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport {\n  editorOpened,\n  fetchChannel,\n  postsChanged,\n} from '../../features/channel/channelSlice';\nimport { Display } from './Display';\nimport { Field } from './Field';\n\nexport const Channel: React.FC = () => {\n  const channel = useAppSelector((state) => state.channel.channel);\n  const isFetching = useAppSelector((state) => state.channel.isFetching);\n  const fetchingError = useAppSelector((state) => state.channel.fetchingError);\n\n  const dispatch = useAppDispatch();\n\n  const params = useParams();\n\n  useEffect(() => {\n    if (\n      params.channelId &&\n      (channel === null || +params.channelId !== channel.id)\n    ) {\n      dispatch(postsChanged(null));\n      dispatch(fetchChannel(+params.channelId));\n    }\n  }, [params.channelId, channel, dispatch]);\n\n  const openEditor = () => {\n    dispatch(editorOpened());\n  };\n\n  const clickHandler = () => {\n    if (params.channelId) {\n      dispatch(fetchChannel(+params.channelId));\n    }\n  };\n\n  if (channel && !fetchingError && !isFetching)\n    return (\n      <Card\n        title={channel.name}\n        extra={<Typography.Link onClick={openEditor}>Edit</Typography.Link>}\n        className=\"w-full h-full flex flex-col\"\n        bodyStyle={{\n          display: 'flex',\n          flexDirection: 'column',\n          overflowY: 'hidden',\n          height: '100%',\n        }}\n      >\n        <Display />\n        <Field />\n      </Card>\n    );\n\n  return (\n    <Card\n      className=\"w-full h-full flex flex-col\"\n      bodyStyle={{\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        overflowY: 'hidden',\n        height: '100%',\n      }}\n    >\n      {isFetching && !fetchingError && <Spin />}\n      {fetchingError && (\n        <Result\n          status=\"warning\"\n          title=\"Виникла помилка під час завантаження каналу\"\n          subTitle={fetchingError}\n          extra={\n            <Button type=\"primary\" onClick={clickHandler} loading={isFetching}>\n              Спробувати ще раз\n            </Button>\n          }\n        />\n      )}\n    </Card>\n  );\n};\n","import { Button, Empty } from 'antd';\n\nimport { Typography } from 'antd';\n\nimport React from 'react';\nimport { useAppDispatch } from '../app/hooks';\nimport { creatorOpened } from '../features/channel/channelSlice';\n\nconst { Paragraph } = Typography;\n\nexport const EmptyMain: React.FC = () => {\n  const dispatch = useAppDispatch();\n\n  const openForm = () => {\n    dispatch(creatorOpened());\n  };\n\n  return (\n    <Empty\n      className=\"\"\n      description={\n        <div>\n          <Paragraph strong>Почніть свою роботу зі створеня каналу</Paragraph>\n          <Button type=\"primary\" onClick={openForm}>\n            Створити канал\n          </Button>\n        </div>\n      }\n    />\n  );\n};\n","export default __webpack_public_path__ + \"static/media/logo.da23b606.png\";","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport logo from '../../assets/logo.png';\n\nexport const HeaderLogo: React.FC = () => {\n  return (\n    <div className=\"flex justify-center items-center flex-none w-18 p-1\">\n      <Link to=\"/\">\n        <img src={logo} alt=\"kpi logo\" className=\"w-14\" />\n      </Link>\n    </div>\n  );\n};\n","import React from 'react';\n\nexport const HeaderMiddle: React.FC = () => {\n  return <div className=\"flex-grow p-1\"></div>;\n};\n","import React from 'react';\n\nimport { Avatar } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\n\nimport Text from 'antd/lib/typography/Text';\nimport { useAppSelector } from '../../app/hooks';\nimport { Link } from 'react-router-dom';\n\nexport const HeaderUser: React.FC = () => {\n  const authUser = useAppSelector((state) => state.user.user);\n\n  return (\n    <div className=\"flex items-center gap-2 flex-none w-56 py-1 pl-1 pr-4\">\n      {authUser && (\n        <Link to=\"/settings\">\n          <div className=\"flex flex-grow items-center gap-2 overflow-hidden group\">\n            <Avatar\n              size={48}\n              icon={<UserOutlined />}\n              src={authUser.photo}\n              className=\"flex-none\"\n            />\n            <Text\n              strong\n              className=\"text-base truncate group-hover:text-blue-400\"\n            >\n              {authUser.login}\n            </Text>\n          </div>\n        </Link>\n      )}\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { HeaderLogo } from './HeaderLogo';\nimport { HeaderMiddle } from './HeaderMiddle';\nimport { HeaderUser } from './HeaderUser';\n\nexport const Header: React.FC = () => {\n  return (\n    <header className=\"flex items-center border-b-2 bg-gray-100\">\n      <HeaderLogo />\n      <HeaderMiddle />\n      <HeaderUser />\n    </header>\n  );\n};\n","import React from 'react';\nimport { Spin } from 'antd';\n\nexport const Init: React.FC = () => {\n  return (\n    <div className=\"h-screen flex justify-center items-center\">\n      <Spin\n        size=\"large\"\n        tip={<span className=\"text-lg\">Loading app . . .</span>}\n      />\n    </div>\n  );\n};\n","import { template } from './../../app/api';\nimport { AuthData, Response, User } from './../../app/types';\nimport { SignInData } from './authSlice';\n\nexport const authAPI = {\n  authorize: () => {\n    return template.get<Response<AuthData>>('session');\n  },\n\n  signIn: ({ login, password }: SignInData) => {\n    return template.post<Response<AuthData>>('session', {\n      login,\n      password,\n    });\n  },\n\n  signUp: (user: User) => {\n    return template.post<Response<AuthData>>('user', {\n      ...user,\n    });\n  },\n\n  signOut: () => {\n    return template.delete<Response<AuthData>>('session');\n  },\n};\n","import { AuthData } from './../../app/types';\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { User, Response } from '../../app/types';\nimport { authAPI } from './authAPI';\nimport { AxiosError } from 'axios';\nimport { userChanged, userChannelsChanged } from '../user/userSlice';\n\nexport interface SignInData {\n  login: string;\n  password: string;\n}\n\nexport interface AuthState {\n  id: number | null;\n\n  isAuthorizing: boolean;\n  authError: string | null;\n\n  isSigningIn: boolean;\n  signingInError: string | null;\n\n  isSigningUp: boolean;\n  signingUpError: string | null;\n\n  isSigningOut: boolean;\n  signingOutError: string | null;\n}\n\nconst initialState: AuthState = {\n  id: null,\n\n  isAuthorizing: true,\n  authError: null,\n\n  isSigningIn: false,\n  signingInError: null,\n\n  isSigningUp: false,\n  signingUpError: null,\n\n  isSigningOut: false,\n  signingOutError: null,\n};\n\nexport const authorize = createAsyncThunk('auth/authorized', async () => {\n  const response = await authAPI.authorize();\n\n  return response.data;\n});\n\nexport const signIn = createAsyncThunk<\n  Response<AuthData>,\n  SignInData,\n  {\n    rejectValue: string;\n  }\n>(\n  'auth/signed_in',\n  async ({ login, password }: SignInData, { rejectWithValue }) => {\n    try {\n      const response = await authAPI.signIn({ login, password });\n      if (response.data.errors[0]) {\n        return rejectWithValue(response.data.errors[0]);\n      }\n\n      return response.data;\n    } catch (e) {\n      const error = e as AxiosError;\n      if (error.response && error.response.status === 401) {\n        return rejectWithValue(error.response.data.errors[0]);\n      }\n      return rejectWithValue(\n        error.response?.statusText ?? 'Some error occured'\n      );\n    }\n  }\n);\n\nexport const signUp = createAsyncThunk<\n  Response<AuthData>,\n  User,\n  {\n    rejectValue: string;\n  }\n>('auth/signed_up', async (user: User, { rejectWithValue }) => {\n  try {\n    const response = await authAPI.signUp(user);\n    return response.data;\n  } catch (e) {\n    const error = e as AxiosError;\n    const statuses = [400, 404, 409];\n\n    if (error.response?.status && statuses.includes(error.response.status)) {\n      return rejectWithValue(error.response.data.errors[0]);\n    } else {\n      return rejectWithValue(\n        error.response?.statusText ?? 'Some error occured'\n      );\n    }\n  }\n});\n\nexport const signOut = createAsyncThunk(\n  'auth/signed_out',\n  async (_, { dispatch }) => {\n    const response = await authAPI.signOut();\n    if (!response.data.errors.length) {\n      dispatch(userChanged(null));\n      dispatch(userChannelsChanged([]));\n    }\n    return response.data;\n  }\n);\n\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    signingInErrorChanged: (state, action) => {\n      state.signingInError = action.payload;\n    },\n    signingUpErrorChanged: (state, action) => {\n      state.signingUpError = action.payload;\n    },\n\n    signingOutErrorChanged: (state, action) => {\n      state.signingOutError = action.payload;\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder\n      .addCase(authorize.pending, (state) => {\n        state.isAuthorizing = true;\n        state.id = null;\n      })\n      .addCase(authorize.fulfilled, (state, action) => {\n        state.isAuthorizing = false;\n        state.authError = null;\n        if (!action.payload.errors.length && action.payload.data.id) {\n          state.id = action.payload.data.id;\n        }\n      })\n      .addCase(authorize.rejected, (state, action) => {\n        state.authError = action.error.message ?? null;\n        state.isAuthorizing = false;\n      })\n\n      .addCase(signIn.pending, (state) => {\n        state.isSigningIn = true;\n      })\n      .addCase(signIn.fulfilled, (state, action) => {\n        state.isSigningIn = false;\n        if (action.payload.data.id) {\n          state.id = action.payload.data.id;\n        }\n      })\n      .addCase(signIn.rejected, (state, action) => {\n        state.signingInError = action.payload ?? null;\n        state.isSigningIn = false;\n      })\n\n      .addCase(signUp.pending, (state) => {\n        state.isSigningUp = true;\n      })\n      .addCase(signUp.fulfilled, (state, action) => {\n        state.isSigningUp = false;\n        if (!action.payload.errors.length && action.payload.data.id) {\n          state.id = action.payload.data.id;\n        }\n      })\n      .addCase(signUp.rejected, (state, action) => {\n        state.signingUpError = action.payload ?? null;\n        state.isSigningUp = false;\n      })\n\n      .addCase(signOut.pending, (state) => {\n        state.isSigningOut = true;\n      })\n      .addCase(signOut.fulfilled, (state) => {\n        state.isSigningOut = false;\n        state.id = null;\n      })\n      .addCase(signOut.rejected, (state, action) => {\n        state.signingOutError = action.error.message ?? null;\n        state.isSigningOut = false;\n      });\n  },\n});\n\nexport const {\n  signingInErrorChanged,\n  signingUpErrorChanged,\n  signingOutErrorChanged,\n} = authSlice.actions;\n\nexport default authSlice.reducer;\n","import { Button, Result } from 'antd';\nimport React from 'react';\nimport { useAppDispatch } from '../app/hooks';\nimport { init } from '../features/app/appSlice';\nimport { authorize } from '../features/auth/authSlice';\n\ninterface Props {\n  error: string | null;\n  loading: boolean;\n}\n\nexport const InitError: React.FC<Props> = ({ error, loading }) => {\n  const dispatch = useAppDispatch();\n\n  const clickHandler = () => {\n    dispatch(authorize());\n  };\n\n  return (\n    <div className=\"h-screen w-screen flex justify-center items-center\">\n      <Result\n        status=\"warning\"\n        title=\"Виникла помилка під час завантаження додатку\"\n        subTitle={error}\n        extra={\n          <Button type=\"primary\" onClick={clickHandler} loading={loading}>\n            Спробувати ще раз\n          </Button>\n        }\n      />\n    </div>\n  );\n};\n","import { Button, Result } from 'antd';\nimport React from 'react';\nimport { useNavigate } from 'react-router';\n\nexport const NotFound: React.FC = () => {\n  const navigate = useNavigate();\n  const clickHandler = () => {\n    navigate('/');\n  };\n\n  return (\n    <div className=\"h-full w-full flex justify-center items-center\">\n      <Result\n        status=\"404\"\n        title=\"404\"\n        subTitle=\"Вибачте, такої сторінки не існує\"\n        extra={\n          <Button type=\"primary\" onClick={clickHandler}>\n            На головну\n          </Button>\n        }\n      />\n    </div>\n  );\n};\n","import React from 'react';\nimport { Form, Input, Button, Upload, Avatar, Space } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\nimport {\n  useAppSelector,\n  useErrorMessage,\n  useImageUpload,\n  useSuccessMessage,\n} from '../app/hooks';\nimport { useDispatch } from 'react-redux';\nimport {\n  updateSucceedChanged,\n  updateUser,\n  updatingErrorChanged,\n} from '../features/user/userSlice';\nimport { signingOutErrorChanged, signOut } from '../features/auth/authSlice';\n\nexport interface SettingsFormValues {\n  name: string;\n  department: string;\n  group?: string;\n}\n\nexport const Settings: React.FC = () => {\n  const user = useAppSelector((state) => state.user.user);\n  const isUpdating = useAppSelector((state) => state.user.isUpdating);\n  const updateSucceed = useAppSelector((state) => state.user.updateSucceed);\n  const updatingError = useAppSelector((state) => state.user.updatingError);\n  const signingOutError = useAppSelector((state) => state.auth.signingOutError);\n\n  useErrorMessage(signingOutError, signingOutErrorChanged);\n  useErrorMessage(updatingError, updatingErrorChanged);\n  useSuccessMessage('Зміни застосовані', updateSucceed, updateSucceedChanged);\n\n  const dispatch = useDispatch();\n  const { img, handleChange, beforeUpload, dummyRequest } = useImageUpload(\n    user?.photo ?? null\n  );\n\n  const submitHandler = (values: SettingsFormValues) => {\n    dispatch(updateUser({ ...values, photo: img }));\n  };\n\n  return (\n    <div className=\"flex gap-5 ml-auto mr-auto self-center\">\n      <div>\n        <Upload\n          name=\"avatar\"\n          showUploadList={false}\n          beforeUpload={beforeUpload}\n          customRequest={dummyRequest}\n          onChange={handleChange}\n        >\n          <Avatar size={200} shape=\"square\" src={img} icon={<UserOutlined />} />\n        </Upload>\n      </div>\n\n      <div className=\"w-96\">\n        <Form name=\"settings\" onFinish={submitHandler}>\n          <Form.Item\n            name=\"name\"\n            initialValue={user?.name}\n            rules={[\n              {\n                required: true,\n                message: \"Будь ласка, введіть своє ім'я\",\n                whitespace: true,\n              },\n            ]}\n          >\n            <Input placeholder=\"П.І.Б.\" />\n          </Form.Item>\n\n          <Form.Item\n            name=\"department\"\n            initialValue={user?.department}\n            rules={[\n              {\n                required: true,\n                message: 'Будь ласка, введіть назву вашої кафедри',\n                whitespace: true,\n              },\n            ]}\n          >\n            <Input value={user?.department} placeholder=\"Ваша кафедра\" />\n          </Form.Item>\n\n          {user?.status === 'student' && (\n            <Form.Item\n              name=\"group\"\n              rules={[\n                {\n                  required: true,\n                  message: 'Будь ласка, введіть назву вашої групи',\n                  whitespace: true,\n                },\n              ]}\n              initialValue={user.group}\n            >\n              <Input placeholder=\"Ваша група\" />\n            </Form.Item>\n          )}\n\n          <Form.Item>\n            <Space>\n              <Button type=\"primary\" htmlType=\"submit\" loading={isUpdating}>\n                Застосувати зміни\n              </Button>\n\n              <Button onClick={() => dispatch(signOut())}>\n                Вийти з акаунту\n              </Button>\n            </Space>\n          </Form.Item>\n        </Form>\n      </div>\n    </div>\n  );\n};\n","import { useEffect } from 'react';\nimport { useNavigate } from 'react-router';\nimport { useAppSelector } from '../../app/hooks';\n\nexport const useRedirectFromAuth = () => {\n  const authId = useAppSelector((state) => state.auth.id);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (authId) {\n      navigate('/');\n    }\n  }, [authId, navigate]);\n};\n","import React from 'react';\nimport { UserBasic, WithPassword } from '../app/types';\n\nimport { Form, Input, Button } from 'antd';\nimport { Link } from 'react-router-dom';\nimport { useRedirectFromAuth } from '../features/auth/hooks';\nimport { useAppSelector, useAppDispatch, useErrorMessage } from '../app/hooks';\nimport { signIn, signingInErrorChanged } from '../features/auth/authSlice';\n\ntype FormValues = Pick<UserBasic, 'login'> & WithPassword;\n\nexport const SignIn: React.FC = () => {\n  const isLoading = useAppSelector((state) => state.auth.isSigningIn);\n  const error = useAppSelector((state) => state.auth.signingInError);\n  const dispatch = useAppDispatch();\n\n  useRedirectFromAuth();\n  useErrorMessage(error, signingInErrorChanged);\n\n  const submitHandler = (values: FormValues) => {\n    dispatch(signIn(values));\n  };\n\n  return (\n    <div className=\"w-96 ml-auto mr-auto self-center\">\n      <Form name=\"login\" onFinish={submitHandler}>\n        <Form.Item\n          name=\"login\"\n          rules={[\n            {\n              required: true,\n              message: 'Будь ласка, введіть логін',\n              whitespace: true,\n            },\n          ]}\n        >\n          <Input placeholder=\"Логін\" />\n        </Form.Item>\n\n        <Form.Item\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: 'Будь ласка, введіть пароль',\n              whitespace: true,\n            },\n          ]}\n        >\n          <Input.Password placeholder=\"Пароль\" />\n        </Form.Item>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={isLoading}>\n            Війти\n          </Button>\n          <Link to=\"/sign-up\">\n            <div className=\"inline-block text-blue-500 py-1 px-3 hover:text-blue-400 focus:text-blue-400\">\n              Зареєструватися\n            </div>\n          </Link>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { Form, Input, Select, Button } from 'antd';\nimport { Status, User, WithPassword } from '../app/types';\nimport { Link } from 'react-router-dom';\nimport { useRedirectFromAuth } from '../features/auth/hooks';\nimport { useAppDispatch, useAppSelector, useErrorMessage } from '../app/hooks';\nimport { signingUpErrorChanged, signUp } from '../features/auth/authSlice';\n\nconst { Option } = Select;\n\ntype FormValues = User & WithPassword;\n\nexport const SignUp: React.FC = () => {\n  const isLoading = useAppSelector((state) => state.auth.isSigningUp);\n  const error = useAppSelector((state) => state.auth.signingUpError);\n  const dispatch = useAppDispatch();\n  useErrorMessage(error, signingUpErrorChanged);\n  const [status, setStatus] = useState<Status | null>(null);\n  useRedirectFromAuth();\n\n  const statusChangeHandler = (value: Status) => {\n    setStatus(value);\n  };\n\n  const submitHandler = (values: FormValues) => {\n    dispatch(signUp(values));\n  };\n\n  return (\n    <div className=\"w-96 ml-auto mr-auto self-center\">\n      <Form name=\"registration\" onFinish={submitHandler}>\n        <Form.Item\n          name=\"login\"\n          rules={[\n            {\n              required: true,\n              message: 'Будь ласка, введіть логін',\n              whitespace: true,\n            },\n\n            {\n              min: 4,\n              message: 'Логін повинен бути не коротше за 4 символи',\n            },\n          ]}\n        >\n          <Input placeholder=\"Логін\" />\n        </Form.Item>\n\n        <Form.Item\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: 'Будь ласка, введіть пароль',\n              whitespace: true,\n            },\n            {\n              min: 6,\n              message: 'Пароль повинен бути не коротше за 6 символів',\n            },\n          ]}\n        >\n          <Input.Password placeholder=\"Пароль\" />\n        </Form.Item>\n\n        <Form.Item\n          name=\"name\"\n          rules={[\n            {\n              required: true,\n              message: \"Будь ласка, введіть своє ім'я\",\n              whitespace: true,\n            },\n          ]}\n        >\n          <Input placeholder=\"П.І.Б.\" />\n        </Form.Item>\n\n        <Form.Item\n          name=\"status\"\n          rules={[\n            { required: true, message: 'Будь ласка, оберіть свій статус' },\n          ]}\n        >\n          <Select placeholder=\"Ваш статус\" onChange={statusChangeHandler}>\n            <Option value=\"student\">Студент</Option>\n            <Option value=\"lecturer\">Викладач</Option>\n          </Select>\n        </Form.Item>\n\n        <Form.Item\n          name=\"department\"\n          rules={[\n            {\n              required: true,\n              message: 'Будь ласка, введіть назву Вашої кафедри',\n              whitespace: true,\n            },\n          ]}\n        >\n          <Input placeholder=\"Ваша кафедра\" />\n        </Form.Item>\n\n        {status === 'student' && (\n          <Form.Item\n            name=\"group\"\n            rules={[\n              {\n                required: true,\n                message: 'Будь ласка, введіть назву Вашої групи',\n                whitespace: true,\n              },\n            ]}\n          >\n            <Input placeholder=\"Ваша група\" />\n          </Form.Item>\n        )}\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={isLoading}>\n            Зареєструватися\n          </Button>\n          <Link to=\"/sign-in\">\n            <div className=\"inline-block text-blue-500 py-1 px-3 hover:text-blue-400 focus:text-blue-400\">\n              Вхід\n            </div>\n          </Link>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n};\n","import { fetchUser, fetchUserChannels, UserState } from './../user/userSlice';\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\ninterface AppState {\n  isInit: boolean;\n  isIniting: boolean;\n  error: string | null;\n}\n\nconst initialState: AppState = {\n  isInit: false,\n  isIniting: false,\n  error: null,\n};\n\nexport const init = createAsyncThunk(\n  'app/init',\n  async (id: number, { dispatch, getState }) => {\n    const state = getState() as { user: UserState };\n    return await Promise.all([\n      dispatch(fetchUser(id)),\n      dispatch(\n        fetchUserChannels({\n          portion: state.user.lastPortion + 1,\n          count: state.user.count,\n        })\n      ),\n    ]);\n  }\n);\n\nconst appSlice = createSlice({\n  name: 'app',\n  initialState,\n  reducers: {\n    initChanged: (state, action) => {\n      state.isInit = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(init.pending, (state) => {\n        state.isIniting = true;\n      })\n      .addCase(init.fulfilled, (state) => {\n        state.isIniting = false;\n        state.isInit = true;\n        state.error = null;\n      })\n      .addCase(init.rejected, (state, action) => {\n        state.isIniting = false;\n        state.isInit = false;\n        state.error = action.error.message ?? null;\n      });\n  },\n});\n\nexport const { initChanged } = appSlice.actions;\n\nexport default appSlice.reducer;\n","import React from 'react';\nimport { Navigate } from 'react-router';\nimport { useAppSelector } from '../../app/hooks';\n\ninterface Props {\n  children: React.ReactElement<any, any> | null;\n}\n\nexport const PrivateRoute: React.FC<Props> = ({ children }) => {\n  const authId = useAppSelector((state) => state.auth.id);\n  return authId ? children : <Navigate to=\"/sign-in\" />;\n};\n","import React, { useEffect } from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport { useAppDispatch, useAppSelector } from './app/hooks';\nimport { Body } from './components/Body';\nimport { Channel } from './components/Channel/Channel';\nimport { EmptyMain } from './components/EmptyMain';\n\nimport { Header } from './components/Header/Header';\nimport { Init } from './components/Init';\nimport { InitError } from './components/InitError';\nimport { NotFound } from './components/NotFound';\nimport { Settings } from './components/Settings';\nimport { SignIn } from './components/SignIn';\nimport { SignUp } from './components/SignUp';\nimport { init } from './features/app/appSlice';\nimport { authorize } from './features/auth/authSlice';\nimport { PrivateRoute } from './features/auth/PrivateRoute';\n\nexport const App: React.FC = () => {\n  const authId = useAppSelector((state) => state.auth.id);\n  const isInit = useAppSelector((state) => state.app.isInit);\n  const isIniting = useAppSelector((state) => state.app.isIniting);\n  const isAuthorizing = useAppSelector((state) => state.auth.isAuthorizing);\n  const initError = useAppSelector((state) => state.app.error);\n  const authError = useAppSelector((state) => state.auth.authError);\n\n  const error = initError ?? authError;\n  const isLoading = isIniting || isAuthorizing;\n\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    if (!isInit && !initError) {\n      dispatch(authorize());\n    }\n  }, [dispatch, initError, isInit]);\n\n  useEffect(() => {\n    if (authId) {\n      dispatch(init(authId));\n    }\n  }, [authId, dispatch]);\n\n  if (error) {\n    return <InitError error={error} loading={isLoading} />;\n  }\n\n  if (isLoading && !error) return <Init />;\n\n  return (\n    <div className=\"box-border h-screen flex flex-col\">\n      <Header />\n      <section className=\"flex-grow flex overflow-hidden\">\n        <Routes>\n          <Route path=\"/\" element={<Body />}>\n            <Route\n              index\n              element={\n                <PrivateRoute>\n                  <EmptyMain />\n                </PrivateRoute>\n              }\n            />\n            <Route\n              path=\"/channel/:channelId\"\n              element={\n                <PrivateRoute>\n                  <Channel />\n                </PrivateRoute>\n              }\n            />\n            <Route\n              path=\"/chat/:userId\"\n              element={\n                <PrivateRoute>\n                  <EmptyMain />\n                </PrivateRoute>\n              }\n            />\n            <Route\n              path=\"/settings\"\n              element={\n                <PrivateRoute>\n                  <Settings />\n                </PrivateRoute>\n              }\n            />\n            <Route path=\"*\" element={<NotFound />} />\n          </Route>\n          <Route path=\"/sign-in\" element={<SignIn />} />\n          <Route path=\"/sign-up\" element={<SignUp />} />\n          <Route path=\"*\" element={<NotFound />} />\n        </Routes>\n      </section>\n    </div>\n  );\n};\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\nimport authReducer from '../features/auth/authSlice';\nimport userReducer from '../features/user/userSlice';\nimport channelReducer from '../features/channel/channelSlice';\nimport postReducer from '../features/post/postSlice';\n\nimport appReducer from '../features/app/appSlice';\n\nexport const store = configureStore({\n  reducer: {\n    auth: authReducer,\n    user: userReducer,\n    channel: channelReducer,\n    post: postReducer,\n    app: appReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\nimport './index.css';\nimport { App } from './App';\nimport { store } from './app/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}